(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5989],{1513:(e,t,n)=>{"use strict";n.d(t,{R:()=>c});var l=n(1668),s=n(4587),i=n.n(s),r=n(4232);let o={img:e=>(0,r.createElement)("object"==typeof e.src?i():"img",e)},c=e=>(0,l.R)({...o,...e})},1807:(e,t,n)=>{"use strict";n.d(t,{e:()=>a});var l=n(7876),s=n(181),i=n(7096);let r=(0,n(4232).createContext)({}),o=r.Provider;r.displayName="SSG";var c=n(1513);function a(e,t,n,l){let i=globalThis[s.VZ];return i.route=t,i.pageMap=n.pageMap,i.context[t]={Content:e,pageOpts:n,useTOC:l},d}function d({__nextra_pageMap:e=[],__nextra_dynamic_opts:t,...n}){let r=globalThis[s.VZ],{Layout:c,themeConfig:a}=r,{route:d,locale:p}=(0,i.r)(),u=r.context[d];if(!u)throw Error(`No content found for the "${d}" route. Please report it as a bug.`);let{pageOpts:f,useTOC:g,Content:b}=u;if(d.startsWith("/["))f.pageMap=e;else for(let{route:t,children:n}of e){let e=t.split("/").slice(p?2:1);(function e(t,[n,...l]){for(let s of t)if("children"in s&&n===s.name)return l.length?e(s.children,l):s})(f.pageMap,e).children=n}if(t){let{title:e,frontMatter:n}=t;f={...f,title:e,frontMatter:n}}return(0,l.jsx)(c,{themeConfig:a,pageOpts:f,pageProps:n,children:(0,l.jsx)(o,{value:n,children:(0,l.jsx)(h,{useTOC:g,children:(0,l.jsx)(b,{...n})})})})}function h({children:e,useTOC:t}){let{wrapper:n}=(0,c.R)();return(0,l.jsx)(p,{useTOC:t,wrapper:n,children:e})}function p({children:e,useTOC:t,wrapper:n,...s}){let i=t(s);return n?(0,l.jsx)(n,{toc:i,children:e}):e}},3654:(e,t,n)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/docs/troubleshooting/github-app-webhooks",function(){return n(8056)}])},8056:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a,useTOC:()=>c});var l=n(7876),s=n(1807),i=n(4674),r=n(1513),o=n(9941);function c(e){return[{value:"Failing deliveries",id:"failing-deliveries",depth:2},{value:"Github App secrets",id:"github-app-secrets",depth:3}]}let a=(0,s.e)(function(e){let{toc:t=c(e)}=e,n={code:"code",h2:"h2",h3:"h3",li:"li",p:"p",ul:"ul",...(0,r.R)(),...e.components},{Code:s}=n;return s||function(e,t){throw Error("Expected "+(t?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Code",!0),(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n.p,{children:"Letâ€™s quickly validate that the app is able to send events to the Lifecycle app successfully."}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"Navigate to your Github app"}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsxs)(n.p,{children:["Click ",(0,l.jsx)(n.code,{children:"App Settings"})," link in the Github application page"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsxs)(n.p,{children:["Choose ",(0,l.jsx)(n.code,{children:"Advanced"})," from the left sidebar"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.code,{children:"Recent Deliveries"})," section should show a successful delivery of the ",(0,l.jsx)(n.code,{children:"installation"})," event to the Lifecycle app."]}),"\n",(0,l.jsx)(o.P,{type:"warning",children:(0,l.jsxs)(n.p,{children:["If you see an error or no deliveries, make sure the app is installed in the\natleast one repository and that the webhook URL is set correctly by\nnavigating to the ",(0,l.jsx)(n.code,{children:"General"})," section from the left sidebar and checking the\n",(0,l.jsx)(n.code,{children:"Webhook URL"})," field."]})}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsxs)(n.p,{children:["If the delivery is successful, you should see a status code of ",(0,l.jsx)(n.code,{children:"200 OK"})]}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:t[0].id,children:t[0].value}),"\n",(0,l.jsx)(n.p,{children:"If you see a delivery failure, it could be due to various reasons. Here are some common issues and how to resolve them:"}),"\n",(0,l.jsx)(n.h3,{id:t[1].id,children:t[1].value}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["Make sure that the Github App secrets are correctly set in the ",(0,l.jsx)(n.code,{children:"lifecycle-app"})," namespace. You can verify this by running the following command:"]}),"\n"]}),"\n",(0,l.jsx)(s,{codeblock:{value:"kubectl get secret app-secrets --namespace lifecycle-app \\\n      -o jsonpath='{.data}' | jq 'with_entries(.value |= @base64d)'",lang:"shellscript",meta:"",code:"kubectl get secret app-secrets --namespace lifecycle-app \\\n      -o jsonpath='{.data}' | jq 'with_entries(.value |= @base64d)'",tokens:[["kubectl","#FFA657"]," ",["get secret app-secrets","#A5D6FF"]," ",["--namespace","#79C0FF"]," ",["lifecycle-app","#A5D6FF"]," ",["\\","#79C0FF"],"\n      ",["-o","#79C0FF"]," ",["jsonpath='{.data}'","#A5D6FF"]," ",["|","#FF7B72"]," ",["jq","#FFA657"]," ",["'with_entries(.value |= @base64d)'","#A5D6FF"]],annotations:[],themeName:"github-dark",style:{color:"#c9d1d9",background:"#0d1117",colorScheme:"dark"}}}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsxs)(n.p,{children:["The output should include all the ",(0,l.jsx)(n.code,{children:"GITHUB_*"})," variables with the correct values."]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"If the secrets are present but the delivery is still failing, try restarting the following deployments."}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(s,{codeblock:{value:" kubectl rollout restart  deployment lifecycle-web lifecycle-worker -n lifecycle-app",lang:"shellscript",meta:"",code:" kubectl rollout restart  deployment lifecycle-web lifecycle-worker -n lifecycle-app",tokens:[" ",["kubectl","#FFA657"]," ",["rollout restart  deployment lifecycle-web lifecycle-worker","#A5D6FF"]," ",["-n","#79C0FF"]," ",["lifecycle-app","#A5D6FF"]],annotations:[],themeName:"github-dark",style:{color:"#c9d1d9",background:"#0d1117",colorScheme:"dark"}}}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Try triggering a new event (create a pull request) by making a change in the repository or by manually redelivering a failed delivery."}),"\n"]})]})},"/docs/troubleshooting/github-app-webhooks",{filePath:"src/pages/docs/troubleshooting/github-app-webhooks.mdx",timestamp:1749148601e3,pageMap:i.O,frontMatter:{title:"Missing PR comment",tags:["mission control","comment","missing","issue","setup"]},title:"Missing PR comment"},"undefined"==typeof RemoteContent?c:RemoteContent.useTOC)}},e=>{var t=t=>e(e.s=t);e.O(0,[4674,636,6593,8792],()=>t(3654)),_N_E=e.O()}]);