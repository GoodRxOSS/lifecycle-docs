(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8481],{1513:(e,n,r)=>{"use strict";r.d(n,{R:()=>c});var s=r(91668),t=r(54587),i=r.n(t),d=r(14232);let o={img:e=>(0,d.createElement)("object"==typeof e.src?i():"img",e)},c=e=>(0,s.R)({...o,...e})},11304:(e,n,r)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/docs/features/mcp-integration",function(){return r(71978)}])},71807:(e,n,r)=>{"use strict";r.d(n,{e:()=>l});var s=r(37876),t=r(20181),i=r(27096);let d=(0,r(14232).createContext)({}),o=d.Provider;d.displayName="SSG";var c=r(1513);function l(e,n,r,s){let i=globalThis[t.VZ];return i.route=n,i.pageMap=r.pageMap,i.context[n]={Content:e,pageOpts:r,useTOC:s},a}function a({__nextra_pageMap:e=[],__nextra_dynamic_opts:n,...r}){let d=globalThis[t.VZ],{Layout:c,themeConfig:l}=d,{route:a,locale:u}=(0,i.r)(),x=d.context[a];if(!x)throw Error(`No content found for the "${a}" route. Please report it as a bug.`);let{pageOpts:p,useTOC:j,Content:v}=x;if(a.startsWith("/["))p.pageMap=e;else for(let{route:n,children:r}of e){let e=n.split("/").slice(u?2:1);(function e(n,[r,...s]){for(let t of n)if("children"in t&&r===t.name)return s.length?e(t.children,s):t})(p.pageMap,e).children=r}if(n){let{title:e,frontMatter:r}=n;p={...p,title:e,frontMatter:r}}return(0,s.jsx)(c,{themeConfig:l,pageOpts:p,pageProps:r,children:(0,s.jsx)(o,{value:r,children:(0,s.jsx)(h,{useTOC:j,children:(0,s.jsx)(v,{...r})})})})}function h({children:e,useTOC:n}){let{wrapper:r}=(0,c.R)();return(0,s.jsx)(u,{useTOC:n,wrapper:r,children:e})}function u({children:e,useTOC:n,wrapper:r,...t}){let i=n(t);return r?(0,s.jsx)(r,{toc:i,children:e}):e}},71978:(e,n,r)=>{"use strict";r.r(n),r.d(n,{default:()=>l,useTOC:()=>c});var s=r(37876),t=r(71807),i=r(1781),d=r(1513),o=r(19941);function c(e){return[{value:"Configuring MCP servers",id:"configuring-mcp-servers",depth:2},{value:"Transport auto-negotiation",id:"transport-auto-negotiation",depth:3},{value:"Connectivity validation",id:"connectivity-validation",depth:3},{value:"Scoping and merge behavior",id:"scoping-and-merge-behavior",depth:2},{value:"Runtime merge",id:"runtime-merge",depth:3},{value:"Disabling global servers per-repository",id:"disabling-global-servers-per-repository",depth:3},{value:"Managing MCP servers via API",id:"managing-mcp-servers-via-api",depth:2},{value:"List servers",id:"list-servers",depth:3},{value:"Create a server",id:"create-a-server",depth:3},{value:"Get a server by slug",id:"get-a-server-by-slug",depth:3},{value:"Update a server",id:"update-a-server",depth:3},{value:"Delete a server",id:"delete-a-server",depth:3},{value:"Health check",id:"health-check",depth:3},{value:"Tool naming and safety",id:"tool-naming-and-safety",depth:2},{value:"Naming convention",id:"naming-convention",depth:3},{value:"Safety mapping",id:"safety-mapping",depth:3},{value:"Error handling",id:"error-handling",depth:3},{value:"Troubleshooting",id:"troubleshooting",depth:2},{value:"Server fails connectivity check",id:"server-fails-connectivity-check",depth:3},{value:"Tools not appearing in the agent",id:"tools-not-appearing-in-the-agent",depth:3},{value:"Health check shows unreachable",id:"health-check-shows-unreachable",depth:3}]}let l=(0,t.e)(function(e){let{toc:n=c(e)}=e,r={a:"a",code:"code",h2:"h2",h3:"h3",hr:"hr",li:"li",ol:"ol",p:"p",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,d.R)(),...e.components},{Code:t}=r;return t||function(e,n){throw Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Code",!0),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(r.p,{children:["The ",(0,s.jsx)(r.strong,{children:"Model Context Protocol (MCP)"})," is an open standard that lets AI agents discover and call tools from external servers. Lifecycle supports MCP, so you can extend the ",(0,s.jsx)(r.a,{href:"/docs/features/ai-agent",children:"AI Agent"})," with tools beyond the built-in Kubernetes and GitHub capabilities."]}),"\n",(0,s.jsx)(r.p,{children:"When you register an MCP server, Lifecycle connects to it, discovers the available tools, caches their definitions, and makes them available during chat sessions. MCP tools appear alongside built-in tools and work the same way."}),"\n",(0,s.jsx)(o.P,{type:"info",children:(0,s.jsx)(r.p,{children:"MCP servers must be reachable from the Lifecycle server at the configured URL.\nLifecycle validates connectivity whenever you create or update a server\nconfiguration."})}),"\n",(0,s.jsx)(r.h2,{id:n[0].id,children:n[0].value}),"\n",(0,s.jsx)(r.p,{children:"MCP server configurations are managed through the REST API. Each configuration includes these fields:"}),"\n",(0,s.jsxs)(r.table,{children:[(0,s.jsx)(r.thead,{children:(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.th,{children:"Field"}),(0,s.jsx)(r.th,{children:"Type"}),(0,s.jsx)(r.th,{children:"Required"}),(0,s.jsx)(r.th,{children:"Default"}),(0,s.jsx)(r.th,{children:"Description"})]})}),(0,s.jsxs)(r.tbody,{children:[(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"slug"})}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"string"})}),(0,s.jsx)(r.td,{children:"Yes"}),(0,s.jsx)(r.td,{children:"—"}),(0,s.jsx)(r.td,{children:"Unique identifier. Lowercase alphanumeric and hyphens, 1–100 chars, no leading/trailing hyphens."})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"name"})}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"string"})}),(0,s.jsx)(r.td,{children:"Yes"}),(0,s.jsx)(r.td,{children:"—"}),(0,s.jsx)(r.td,{children:"Human-readable display name."})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"url"})}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"string"})}),(0,s.jsx)(r.td,{children:"Yes"}),(0,s.jsx)(r.td,{children:"—"}),(0,s.jsx)(r.td,{children:"Full URL of the MCP server endpoint."})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"scope"})}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"string"})}),(0,s.jsx)(r.td,{children:"Yes"}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:'"global"'})}),(0,s.jsxs)(r.td,{children:["Either ",(0,s.jsx)(r.code,{children:'"global"'})," or a repo full name (e.g. ",(0,s.jsx)(r.code,{children:'"myorg/myrepo"'}),")."]})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"description"})}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"string"})}),(0,s.jsx)(r.td,{children:"No"}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"null"})}),(0,s.jsx)(r.td,{children:"Optional description of the server’s purpose."})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"headers"})}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"object"})}),(0,s.jsx)(r.td,{children:"No"}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"{}"})}),(0,s.jsx)(r.td,{children:"HTTP headers sent with every request (e.g. auth tokens)."})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"envVars"})}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"object"})}),(0,s.jsx)(r.td,{children:"No"}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"{}"})}),(0,s.jsx)(r.td,{children:"Environment variables associated with this server."})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"enabled"})}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"boolean"})}),(0,s.jsx)(r.td,{children:"No"}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"true"})}),(0,s.jsx)(r.td,{children:"Whether the server is active. Disabled servers are excluded from tool resolution."})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"timeout"})}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"number"})}),(0,s.jsx)(r.td,{children:"No"}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"30000"})}),(0,s.jsx)(r.td,{children:"Timeout in milliseconds for handshake and tool calls."})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"cachedTools"})}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"McpCachedTool[]"})}),(0,s.jsx)(r.td,{children:"Auto"}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"[]"})}),(0,s.jsx)(r.td,{children:"Auto-populated during connectivity validation with discovered tool definitions."})]})]})]}),"\n",(0,s.jsx)(r.h3,{id:n[1].id,children:n[1].value}),"\n",(0,s.jsxs)(r.p,{children:["Lifecycle automatically negotiates the transport protocol. It tries ",(0,s.jsx)(r.strong,{children:"StreamableHTTP"})," first, then falls back to ",(0,s.jsx)(r.strong,{children:"SSE (Server-Sent Events)"}),". If both fail, the connection is rejected with an error describing what went wrong."]}),"\n",(0,s.jsx)(r.h3,{id:n[2].id,children:n[2].value}),"\n",(0,s.jsx)(r.p,{children:"Lifecycle checks that the MCP server is reachable and returns at least one tool:"}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.strong,{children:"On create"})," — Validation always runs. If the server is unreachable or returns zero tools, the request fails with ",(0,s.jsx)(r.code,{children:"422"}),"."]}),"\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.strong,{children:"On update"})," — Validation only runs when ",(0,s.jsx)(r.code,{children:"url"})," or ",(0,s.jsx)(r.code,{children:"headers"})," change. If neither changes, the existing cached tools are preserved."]}),"\n"]}),"\n",(0,s.jsxs)(r.p,{children:["During validation, ",(0,s.jsx)(r.code,{children:"cachedTools"})," is automatically populated with the tools discovered from the server."]}),"\n",(0,s.jsx)(r.hr,{}),"\n",(0,s.jsx)(r.h2,{id:n[3].id,children:n[3].value}),"\n",(0,s.jsx)(r.p,{children:"MCP servers can be scoped at two levels:"}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.strong,{children:"Global"})," (",(0,s.jsx)(r.code,{children:'scope: "global"'}),") — Available to all repositories."]}),"\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.strong,{children:"Per-repository"})," (",(0,s.jsx)(r.code,{children:'scope: "myorg/myrepo"'}),") — Available only to that specific repository."]}),"\n"]}),"\n",(0,s.jsx)(r.h3,{id:n[4].id,children:n[4].value}),"\n",(0,s.jsx)(r.p,{children:"When the AI Agent starts a session, Lifecycle resolves the effective set of MCP servers by combining:"}),"\n",(0,s.jsxs)(r.ol,{children:["\n",(0,s.jsxs)(r.li,{children:["All ",(0,s.jsx)(r.strong,{children:"enabled global"})," servers (minus any in the repository’s ",(0,s.jsx)(r.code,{children:"disabledSlugs"})," list)"]}),"\n",(0,s.jsxs)(r.li,{children:["All ",(0,s.jsx)(r.strong,{children:"enabled per-repository"})," servers for that build’s repository"]}),"\n"]}),"\n",(0,s.jsx)(r.p,{children:"The combined list gives the agent the full set of MCP tools."}),"\n",(0,s.jsx)(r.h3,{id:n[5].id,children:n[5].value}),"\n",(0,s.jsxs)(r.p,{children:["A repository can opt out of specific global MCP servers by adding their slugs to the ",(0,s.jsx)(r.code,{children:"disabledSlugs"})," list. This prevents those servers from contributing tools for that repository without affecting others."]}),"\n",(0,s.jsx)(o.P,{children:(0,s.jsxs)(r.p,{children:["For per-repository AI Agent settings (like ",(0,s.jsx)(r.code,{children:"disabledSlugs"}),", excluded tools,\nand custom rules), see ",(0,s.jsx)(r.a,{href:"/docs/features/ai-agent-configuration",children:"AI Agent\nConfiguration"}),"."]})}),"\n",(0,s.jsx)(r.hr,{}),"\n",(0,s.jsx)(r.h2,{id:n[6].id,children:n[6].value}),"\n",(0,s.jsxs)(r.p,{children:["All endpoints are under ",(0,s.jsx)(r.code,{children:"/api/v2/ai/config/mcp-servers"}),". Request and response bodies use JSON. Header values are redacted to ",(0,s.jsx)(r.code,{children:'"******"'})," in all responses."]}),"\n",(0,s.jsx)(r.h3,{id:n[7].id,children:n[7].value}),"\n",(0,s.jsx)(t,{codeblock:{value:"GET /api/v2/ai/config/mcp-servers?scope={scope}",lang:"txt",meta:"",code:"GET /api/v2/ai/config/mcp-servers?scope={scope}",tokens:[["GET /api/v2/ai/config/mcp-servers?scope={scope}","#C9D1D9"]],annotations:[],themeName:"github-dark",style:{color:"#c9d1d9",background:"#0d1117",colorScheme:"dark"}}}),"\n",(0,s.jsxs)(r.p,{children:["Returns all MCP server configurations for the given scope. Defaults to ",(0,s.jsx)(r.code,{children:'"global"'})," if ",(0,s.jsx)(r.code,{children:"scope"})," is omitted."]}),"\n",(0,s.jsx)(t,{codeblock:{value:'{\n  "status": "success",\n  "data": [\n    {\n      "id": 1,\n      "slug": "my-server",\n      "name": "My MCP Server",\n      "description": "Provides custom tools",\n      "url": "https://mcp.example.com",\n      "scope": "global",\n      "headers": { "Authorization": "******" }, // redacted in responses\n      "envVars": {},\n      "enabled": true,\n      "timeout": 30000,\n      "cachedTools": [\n        {\n          "name": "lookup_user",\n          "description": "Look up a user by ID",\n          "inputSchema": {\n            "type": "object",\n            "properties": { "userId": { "type": "string" } }\n          }\n        }\n      ],\n      "createdAt": "2025-01-15T10:00:00.000Z",\n      "updatedAt": "2025-01-15T10:00:00.000Z"\n    }\n  ]\n}',lang:"json",meta:"",code:'{\n  "status": "success",\n  "data": [\n    {\n      "id": 1,\n      "slug": "my-server",\n      "name": "My MCP Server",\n      "description": "Provides custom tools",\n      "url": "https://mcp.example.com",\n      "scope": "global",\n      "headers": { "Authorization": "******" }, // redacted in responses\n      "envVars": {},\n      "enabled": true,\n      "timeout": 30000,\n      "cachedTools": [\n        {\n          "name": "lookup_user",\n          "description": "Look up a user by ID",\n          "inputSchema": {\n            "type": "object",\n            "properties": { "userId": { "type": "string" } }\n          }\n        }\n      ],\n      "createdAt": "2025-01-15T10:00:00.000Z",\n      "updatedAt": "2025-01-15T10:00:00.000Z"\n    }\n  ]\n}',tokens:[["{","#C9D1D9"],"\n  ",['"status"',"#7EE787"],[":","#C9D1D9"]," ",['"success"',"#A5D6FF"],[",","#C9D1D9"],"\n  ",['"data"',"#7EE787"],[": [","#C9D1D9"],"\n    ",["{","#C9D1D9"],"\n      ",['"id"',"#7EE787"],[":","#C9D1D9"]," ",["1","#79C0FF"],[",","#C9D1D9"],"\n      ",['"slug"',"#7EE787"],[":","#C9D1D9"]," ",['"my-server"',"#A5D6FF"],[",","#C9D1D9"],"\n      ",['"name"',"#7EE787"],[":","#C9D1D9"]," ",['"My MCP Server"',"#A5D6FF"],[",","#C9D1D9"],"\n      ",['"description"',"#7EE787"],[":","#C9D1D9"]," ",['"Provides custom tools"',"#A5D6FF"],[",","#C9D1D9"],"\n      ",['"url"',"#7EE787"],[":","#C9D1D9"]," ",['"https://mcp.example.com"',"#A5D6FF"],[",","#C9D1D9"],"\n      ",['"scope"',"#7EE787"],[":","#C9D1D9"]," ",['"global"',"#A5D6FF"],[",","#C9D1D9"],"\n      ",['"headers"',"#7EE787"],[": {","#C9D1D9"]," ",['"Authorization"',"#7EE787"],[":","#C9D1D9"]," ",['"******"',"#A5D6FF"]," ",["},","#C9D1D9"]," ",["// redacted in responses","#8B949E"],"\n      ",['"envVars"',"#7EE787"],[": {},","#C9D1D9"],"\n      ",['"enabled"',"#7EE787"],[":","#C9D1D9"]," ",["true","#79C0FF"],[",","#C9D1D9"],"\n      ",['"timeout"',"#7EE787"],[":","#C9D1D9"]," ",["30000","#79C0FF"],[",","#C9D1D9"],"\n      ",['"cachedTools"',"#7EE787"],[": [","#C9D1D9"],"\n        ",["{","#C9D1D9"],"\n          ",['"name"',"#7EE787"],[":","#C9D1D9"]," ",['"lookup_user"',"#A5D6FF"],[",","#C9D1D9"],"\n          ",['"description"',"#7EE787"],[":","#C9D1D9"]," ",['"Look up a user by ID"',"#A5D6FF"],[",","#C9D1D9"],"\n          ",['"inputSchema"',"#7EE787"],[": {","#C9D1D9"],"\n            ",['"type"',"#7EE787"],[":","#C9D1D9"]," ",['"object"',"#A5D6FF"],[",","#C9D1D9"],"\n            ",['"properties"',"#7EE787"],[": {","#C9D1D9"]," ",['"userId"',"#7EE787"],[": {","#C9D1D9"]," ",['"type"',"#7EE787"],[":","#C9D1D9"]," ",['"string"',"#A5D6FF"]," ",["} }","#C9D1D9"],"\n          ",["}","#C9D1D9"],"\n        ",["}","#C9D1D9"],"\n      ",["],","#C9D1D9"],"\n      ",['"createdAt"',"#7EE787"],[":","#C9D1D9"]," ",['"2025-01-15T10:00:00.000Z"',"#A5D6FF"],[",","#C9D1D9"],"\n      ",['"updatedAt"',"#7EE787"],[":","#C9D1D9"]," ",['"2025-01-15T10:00:00.000Z"',"#A5D6FF"],"\n    ",["}","#C9D1D9"],"\n  ",["]","#C9D1D9"],"\n",["}","#C9D1D9"]],annotations:[],themeName:"github-dark",style:{color:"#c9d1d9",background:"#0d1117",colorScheme:"dark"}}}),"\n",(0,s.jsx)(r.h3,{id:n[8].id,children:n[8].value}),"\n",(0,s.jsx)(t,{codeblock:{value:"POST /api/v2/ai/config/mcp-servers",lang:"txt",meta:"",code:"POST /api/v2/ai/config/mcp-servers",tokens:[["POST /api/v2/ai/config/mcp-servers","#C9D1D9"]],annotations:[],themeName:"github-dark",style:{color:"#c9d1d9",background:"#0d1117",colorScheme:"dark"}}}),"\n",(0,s.jsx)(r.p,{children:"Registers a new MCP server. Lifecycle validates connectivity before saving."}),"\n",(0,s.jsx)(t,{codeblock:{value:'{\n  "slug": "my-server",\n  "name": "My MCP Server",\n  "url": "https://mcp.example.com",\n  "scope": "global",\n  "description": "Provides custom tools",\n  "headers": { "Authorization": "Bearer token123" }, // sent with every request\n  "enabled": true,\n  "timeout": 30000 // milliseconds\n}',lang:"json",meta:"",code:'{\n  "slug": "my-server",\n  "name": "My MCP Server",\n  "url": "https://mcp.example.com",\n  "scope": "global",\n  "description": "Provides custom tools",\n  "headers": { "Authorization": "Bearer token123" }, // sent with every request\n  "enabled": true,\n  "timeout": 30000 // milliseconds\n}',tokens:[["{","#C9D1D9"],"\n  ",['"slug"',"#7EE787"],[":","#C9D1D9"]," ",['"my-server"',"#A5D6FF"],[",","#C9D1D9"],"\n  ",['"name"',"#7EE787"],[":","#C9D1D9"]," ",['"My MCP Server"',"#A5D6FF"],[",","#C9D1D9"],"\n  ",['"url"',"#7EE787"],[":","#C9D1D9"]," ",['"https://mcp.example.com"',"#A5D6FF"],[",","#C9D1D9"],"\n  ",['"scope"',"#7EE787"],[":","#C9D1D9"]," ",['"global"',"#A5D6FF"],[",","#C9D1D9"],"\n  ",['"description"',"#7EE787"],[":","#C9D1D9"]," ",['"Provides custom tools"',"#A5D6FF"],[",","#C9D1D9"],"\n  ",['"headers"',"#7EE787"],[": {","#C9D1D9"]," ",['"Authorization"',"#7EE787"],[":","#C9D1D9"]," ",['"Bearer token123"',"#A5D6FF"]," ",["},","#C9D1D9"]," ",["// sent with every request","#8B949E"],"\n  ",['"enabled"',"#7EE787"],[":","#C9D1D9"]," ",["true","#79C0FF"],[",","#C9D1D9"],"\n  ",['"timeout"',"#7EE787"],[":","#C9D1D9"]," ",["30000","#79C0FF"]," ",["// milliseconds","#8B949E"],"\n",["}","#C9D1D9"]],annotations:[],themeName:"github-dark",style:{color:"#c9d1d9",background:"#0d1117",colorScheme:"dark"}}}),"\n",(0,s.jsxs)(r.p,{children:["Returns the created configuration (status ",(0,s.jsx)(r.code,{children:"201"}),") with redacted headers and populated ",(0,s.jsx)(r.code,{children:"cachedTools"}),"."]}),"\n",(0,s.jsxs)(r.table,{children:[(0,s.jsx)(r.thead,{children:(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.th,{children:"Error"}),(0,s.jsx)(r.th,{children:"Cause"})]})}),(0,s.jsxs)(r.tbody,{children:[(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"400"})}),(0,s.jsxs)(r.td,{children:["Missing required fields (",(0,s.jsx)(r.code,{children:"slug"}),", ",(0,s.jsx)(r.code,{children:"name"}),", ",(0,s.jsx)(r.code,{children:"url"}),")"]})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"409"})}),(0,s.jsx)(r.td,{children:"A server with the same slug already exists in the same scope"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"422"})}),(0,s.jsx)(r.td,{children:"Slug validation failed, or server unreachable / returned zero tools"})]})]})]}),"\n",(0,s.jsx)(r.h3,{id:n[9].id,children:n[9].value}),"\n",(0,s.jsx)(t,{codeblock:{value:"GET /api/v2/ai/config/mcp-servers/{slug}?scope={scope}",lang:"txt",meta:"",code:"GET /api/v2/ai/config/mcp-servers/{slug}?scope={scope}",tokens:[["GET /api/v2/ai/config/mcp-servers/{slug}?scope={scope}","#C9D1D9"]],annotations:[],themeName:"github-dark",style:{color:"#c9d1d9",background:"#0d1117",colorScheme:"dark"}}}),"\n",(0,s.jsxs)(r.p,{children:["Returns a single configuration with redacted headers. Defaults to ",(0,s.jsx)(r.code,{children:'"global"'})," scope. Returns ",(0,s.jsx)(r.code,{children:"404"})," if not found."]}),"\n",(0,s.jsx)(r.h3,{id:n[10].id,children:n[10].value}),"\n",(0,s.jsx)(t,{codeblock:{value:"PUT /api/v2/ai/config/mcp-servers/{slug}?scope={scope}",lang:"txt",meta:"",code:"PUT /api/v2/ai/config/mcp-servers/{slug}?scope={scope}",tokens:[["PUT /api/v2/ai/config/mcp-servers/{slug}?scope={scope}","#C9D1D9"]],annotations:[],themeName:"github-dark",style:{color:"#c9d1d9",background:"#0d1117",colorScheme:"dark"}}}),"\n",(0,s.jsxs)(r.p,{children:["Only include the fields you want to change. If ",(0,s.jsx)(r.code,{children:"url"})," or ",(0,s.jsx)(r.code,{children:"headers"})," change, connectivity is re-validated."]}),"\n",(0,s.jsx)(t,{codeblock:{value:'{\n  "name": "Updated Name",\n  "timeout": 60000 // bump timeout to 60 seconds\n}',lang:"json",meta:"",code:'{\n  "name": "Updated Name",\n  "timeout": 60000 // bump timeout to 60 seconds\n}',tokens:[["{","#C9D1D9"],"\n  ",['"name"',"#7EE787"],[":","#C9D1D9"]," ",['"Updated Name"',"#A5D6FF"],[",","#C9D1D9"],"\n  ",['"timeout"',"#7EE787"],[":","#C9D1D9"]," ",["60000","#79C0FF"]," ",["// bump timeout to 60 seconds","#8B949E"],"\n",["}","#C9D1D9"]],annotations:[],themeName:"github-dark",style:{color:"#c9d1d9",background:"#0d1117",colorScheme:"dark"}}}),"\n",(0,s.jsxs)(r.p,{children:["Returns the updated configuration. Returns ",(0,s.jsx)(r.code,{children:"404"})," if not found, ",(0,s.jsx)(r.code,{children:"422"})," if connectivity validation fails."]}),"\n",(0,s.jsx)(r.h3,{id:n[11].id,children:n[11].value}),"\n",(0,s.jsx)(t,{codeblock:{value:"DELETE /api/v2/ai/config/mcp-servers/{slug}?scope={scope}",lang:"txt",meta:"",code:"DELETE /api/v2/ai/config/mcp-servers/{slug}?scope={scope}",tokens:[["DELETE /api/v2/ai/config/mcp-servers/{slug}?scope={scope}","#C9D1D9"]],annotations:[],themeName:"github-dark",style:{color:"#c9d1d9",background:"#0d1117",colorScheme:"dark"}}}),"\n",(0,s.jsxs)(r.p,{children:["Soft-deletes the configuration. Returns ",(0,s.jsx)(r.code,{children:"204"})," on success, ",(0,s.jsx)(r.code,{children:"404"})," if not found."]}),"\n",(0,s.jsx)(r.h3,{id:n[12].id,children:n[12].value}),"\n",(0,s.jsx)(t,{codeblock:{value:"GET /api/v2/ai/config/mcp-servers/health",lang:"txt",meta:"",code:"GET /api/v2/ai/config/mcp-servers/health",tokens:[["GET /api/v2/ai/config/mcp-servers/health","#C9D1D9"]],annotations:[],themeName:"github-dark",style:{color:"#c9d1d9",background:"#0d1117",colorScheme:"dark"}}}),"\n",(0,s.jsx)(r.p,{children:"Checks connectivity for all enabled servers. Connects to each one, lists tools, and reports reachability. If the tool list changed since the last check, cached tools are automatically refreshed."}),"\n",(0,s.jsx)(t,{codeblock:{value:'{\n  "healthy": true, // true only when ALL servers are reachable\n  "servers": [\n    {\n      "slug": "my-server",\n      "name": "My MCP Server",\n      "reachable": true,\n      "toolCount": 3,\n      "latencyMs": 245,\n      "error": null,\n      "cacheRefreshed": false // true if tools changed since last check\n    }\n  ]\n}',lang:"json",meta:"",code:'{\n  "healthy": true, // true only when ALL servers are reachable\n  "servers": [\n    {\n      "slug": "my-server",\n      "name": "My MCP Server",\n      "reachable": true,\n      "toolCount": 3,\n      "latencyMs": 245,\n      "error": null,\n      "cacheRefreshed": false // true if tools changed since last check\n    }\n  ]\n}',tokens:[["{","#C9D1D9"],"\n  ",['"healthy"',"#7EE787"],[":","#C9D1D9"]," ",["true","#79C0FF"],[",","#C9D1D9"]," ",["// true only when ALL servers are reachable","#8B949E"],"\n  ",['"servers"',"#7EE787"],[": [","#C9D1D9"],"\n    ",["{","#C9D1D9"],"\n      ",['"slug"',"#7EE787"],[":","#C9D1D9"]," ",['"my-server"',"#A5D6FF"],[",","#C9D1D9"],"\n      ",['"name"',"#7EE787"],[":","#C9D1D9"]," ",['"My MCP Server"',"#A5D6FF"],[",","#C9D1D9"],"\n      ",['"reachable"',"#7EE787"],[":","#C9D1D9"]," ",["true","#79C0FF"],[",","#C9D1D9"],"\n      ",['"toolCount"',"#7EE787"],[":","#C9D1D9"]," ",["3","#79C0FF"],[",","#C9D1D9"],"\n      ",['"latencyMs"',"#7EE787"],[":","#C9D1D9"]," ",["245","#79C0FF"],[",","#C9D1D9"],"\n      ",['"error"',"#7EE787"],[":","#C9D1D9"]," ",["null","#79C0FF"],[",","#C9D1D9"],"\n      ",['"cacheRefreshed"',"#7EE787"],[":","#C9D1D9"]," ",["false","#79C0FF"]," ",["// true if tools changed since last check","#8B949E"],"\n    ",["}","#C9D1D9"],"\n  ",["]","#C9D1D9"],"\n",["}","#C9D1D9"]],annotations:[],themeName:"github-dark",style:{color:"#c9d1d9",background:"#0d1117",colorScheme:"dark"}}}),"\n",(0,s.jsx)(r.hr,{}),"\n",(0,s.jsx)(r.h2,{id:n[13].id,children:n[13].value}),"\n",(0,s.jsx)(r.h3,{id:n[14].id,children:n[14].value}),"\n",(0,s.jsx)(r.p,{children:"To avoid collisions between servers, MCP tools are exposed with a namespaced name:"}),"\n",(0,s.jsx)(t,{codeblock:{value:"mcp__{slug}__{toolName}",lang:"txt",meta:"",code:"mcp__{slug}__{toolName}",tokens:[["mcp__{slug}__{toolName}","#C9D1D9"]],annotations:[],themeName:"github-dark",style:{color:"#c9d1d9",background:"#0d1117",colorScheme:"dark"}}}),"\n",(0,s.jsxs)(r.p,{children:["For example, a tool called ",(0,s.jsx)(r.code,{children:"lookup_user"})," from a server with slug ",(0,s.jsx)(r.code,{children:"my-server"})," becomes ",(0,s.jsx)(r.code,{children:"mcp__my-server__lookup_user"}),". The agent handles this automatically."]}),"\n",(0,s.jsx)(r.h3,{id:n[15].id,children:n[15].value}),"\n",(0,s.jsx)(r.p,{children:"MCP tool annotations are mapped to Lifecycle safety levels that influence how the agent uses each tool:"}),"\n",(0,s.jsxs)(r.table,{children:[(0,s.jsx)(r.thead,{children:(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.th,{children:"MCP Annotation"}),(0,s.jsx)(r.th,{children:"Lifecycle Safety Level"}),(0,s.jsx)(r.th,{children:"What happens"})]})}),(0,s.jsxs)(r.tbody,{children:[(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"destructiveHint: true"})}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"DANGEROUS"})}),(0,s.jsxs)(r.td,{children:["Description prefixed with ",(0,s.jsx)(r.code,{children:"[DANGEROUS]"})]})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"readOnlyHint: true"})}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"SAFE"})}),(0,s.jsxs)(r.td,{children:["Description prefixed with ",(0,s.jsx)(r.code,{children:"[SAFE]"})]})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"openWorldHint: true"})}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"CAUTIOUS"})}),(0,s.jsx)(r.td,{children:"No prefix added"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:"No annotations"}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"CAUTIOUS"})}),(0,s.jsx)(r.td,{children:"Default safety level"})]})]})]}),"\n",(0,s.jsxs)(r.p,{children:["Annotations are evaluated in priority order: ",(0,s.jsx)(r.code,{children:"destructiveHint"})," takes precedence over ",(0,s.jsx)(r.code,{children:"readOnlyHint"}),", which takes precedence over ",(0,s.jsx)(r.code,{children:"openWorldHint"}),"."]}),"\n",(0,s.jsx)(r.h3,{id:n[16].id,children:n[16].value}),"\n",(0,s.jsx)(r.p,{children:"MCP tool errors fall into three categories:"}),"\n",(0,s.jsxs)(r.table,{children:[(0,s.jsx)(r.thead,{children:(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.th,{children:"Error Code"}),(0,s.jsx)(r.th,{children:"Trigger"}),(0,s.jsx)(r.th,{children:"Recoverable"})]})}),(0,s.jsxs)(r.tbody,{children:[(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"MCP_CONNECTION_ERROR"})}),(0,s.jsx)(r.td,{children:"Server unreachable, timeout, connection refused"}),(0,s.jsx)(r.td,{children:"Yes"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"MCP_TOOL_ERROR"})}),(0,s.jsx)(r.td,{children:"Tool returned an error result"}),(0,s.jsx)(r.td,{children:"Yes"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"MCP_PROTOCOL_ERROR"})}),(0,s.jsx)(r.td,{children:"JSON-RPC or protocol-level failure"}),(0,s.jsx)(r.td,{children:"No"})]})]})]}),"\n",(0,s.jsx)(r.p,{children:"Recoverable errors let the agent retry or suggest alternatives. Protocol errors indicate a fundamental compatibility issue between Lifecycle and the server."}),"\n",(0,s.jsx)(r.hr,{}),"\n",(0,s.jsx)(r.h2,{id:n[17].id,children:n[17].value}),"\n",(0,s.jsx)(r.h3,{id:n[18].id,children:n[18].value}),"\n",(0,s.jsxs)(r.ol,{children:["\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.strong,{children:"Check the URL"})," — Confirm the URL is correct and reachable from the Lifecycle server."]}),"\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.strong,{children:"Check the transport"})," — Your server must support StreamableHTTP or SSE. Stdio-only servers do not work with Lifecycle."]}),"\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.strong,{children:"Check authentication"})," — If your server requires auth headers, make sure they are included in the ",(0,s.jsx)(r.code,{children:"headers"})," field. Header values are redacted in responses, so you cannot read them back."]}),"\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.strong,{children:"Check the timeout"})," — If the server is slow to respond, increase the ",(0,s.jsx)(r.code,{children:"timeout"})," value."]}),"\n"]}),"\n",(0,s.jsx)(r.h3,{id:n[19].id,children:n[19].value}),"\n",(0,s.jsxs)(r.ol,{children:["\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.strong,{children:"Verify the server returns at least one tool"})," — Lifecycle rejects servers that expose zero tools during validation."]}),"\n",(0,s.jsxs)(r.li,{children:[(0,s.jsxs)(r.strong,{children:["Check the ",(0,s.jsx)(r.code,{children:"enabled"})," flag"]})," — Disabled servers are excluded from tool resolution."]}),"\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.strong,{children:"Check the scope"})," — A server scoped to a specific repo does not appear for builds in other repos."]}),"\n",(0,s.jsxs)(r.li,{children:[(0,s.jsxs)(r.strong,{children:["Check ",(0,s.jsx)(r.code,{children:"disabledSlugs"})]})," — A repo-level configuration may be opting out of your global server."]}),"\n"]}),"\n",(0,s.jsx)(r.h3,{id:n[20].id,children:n[20].value}),"\n",(0,s.jsxs)(r.p,{children:["Run the health check endpoint to see the specific error message in the ",(0,s.jsx)(r.code,{children:"error"})," field. Common causes include the server being down or network policies blocking traffic from Lifecycle pods."]}),"\n",(0,s.jsx)(o.P,{type:"tip",children:(0,s.jsxs)(r.p,{children:["Use ",(0,s.jsx)(r.code,{children:"GET /api/v2/ai/config/mcp-servers/health"})," to verify all servers are\nreachable and their tool caches are current."]})})]})},"/docs/features/mcp-integration",{filePath:"src/pages/docs/features/mcp-integration.mdx",timestamp:177162007e4,pageMap:i.O,frontMatter:{title:"MCP Integration",tags:["ai","agent","mcp","tools","integration"]},title:"MCP Integration"},"undefined"==typeof RemoteContent?c:RemoteContent.useTOC)}},e=>{var n=n=>e(e.s=n);e.O(0,[1781,636,6593,8792],()=>n(11304)),_N_E=e.O()}]);