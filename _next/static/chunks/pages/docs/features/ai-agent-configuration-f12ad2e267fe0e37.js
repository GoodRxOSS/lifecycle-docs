(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9571],{1513:(e,n,s)=>{"use strict";s.d(n,{R:()=>l});var r=s(91668),i=s(54587),d=s.n(i),t=s(14232);let o={img:e=>(0,t.createElement)("object"==typeof e.src?d():"img",e)},l=e=>(0,r.R)({...o,...e})},65806:(e,n,s)=>{"use strict";s.r(n),s.d(n,{default:()=>c,useTOC:()=>l});var r=s(37876),i=s(71807),d=s(1781),t=s(1513),o=s(19941);function l(e){return[{value:"Configuration hierarchy",id:"configuration-hierarchy",depth:2},{value:"Fields",id:"fields",depth:3},{value:"How merging works",id:"how-merging-works",depth:3},{value:"Provider and model configuration",id:"provider-and-model-configuration",depth:3},{value:"Caching",id:"caching",depth:3},{value:"Prompt customization",id:"prompt-customization",depth:2},{value:"Additive rules",id:"additive-rules",depth:3},{value:"System prompt override",id:"system-prompt-override",depth:3},{value:"Access control",id:"access-control",depth:2},{value:"Excluded tools",id:"excluded-tools",depth:3},{value:"Excluded file patterns",id:"excluded-file-patterns",depth:3},{value:"Orchestration limits",id:"orchestration-limits",depth:2},{value:"Loop protection",id:"loop-protection",depth:3},{value:"Context management",id:"context-management",depth:3},{value:"Tool execution",id:"tool-execution",depth:3},{value:"Resilience",id:"resilience",depth:3},{value:"Managing configuration via API",id:"managing-configuration-via-api",depth:2},{value:"Global configuration",id:"global-configuration",depth:3},{value:"Repository overrides",id:"repository-overrides",depth:3},{value:"Troubleshooting",id:"troubleshooting",depth:2},{value:"Config changes not taking effect",id:"config-changes-not-taking-effect",depth:3},{value:"Cannot exclude a core tool",id:"cannot-exclude-a-core-tool",depth:3},{value:"Excluded tool still being used",id:"excluded-tool-still-being-used",depth:3},{value:"System prompt override not working as expected",id:"system-prompt-override-not-working-as-expected",depth:3}]}let c=(0,i.e)(function(e){let{toc:n=l(e)}=e,s={a:"a",code:"code",h2:"h2",h3:"h3",hr:"hr",li:"li",p:"p",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,t.R)(),...e.components},{Code:i}=s;return i||function(e,n){throw Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Code",!0),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(s.p,{children:["The AI Agent configuration system gives administrators fine-grained control over agent behavior at two levels: ",(0,r.jsx)(s.strong,{children:"global defaults"})," that apply to all repositories, and ",(0,r.jsx)(s.strong,{children:"per-repository overrides"})," for specific projects. All configuration is managed through REST API endpoints."]}),"\n",(0,r.jsx)(o.P,{type:"info",children:(0,r.jsxs)(s.p,{children:["For an overview of the AI Agent itself, see ",(0,r.jsx)(s.a,{href:"/docs/features/ai-agent",children:"AI\nAgent"}),". To extend the agent with external tools, see\n",(0,r.jsx)(s.a,{href:"/docs/features/mcp-integration",children:"MCP Integration"}),"."]})}),"\n",(0,r.jsx)(s.h2,{id:n[0].id,children:n[0].value}),"\n",(0,r.jsxs)(s.p,{children:["Global defaults live in the Lifecycle ",(0,r.jsx)(s.code,{children:"global_config"})," table under the ",(0,r.jsx)(s.code,{children:"aiAgent"})," key. Per-repository overrides are stored in the ",(0,r.jsx)(s.code,{children:"ai_agent_repo_config"})," table and merged on top of global defaults at runtime."]}),"\n",(0,r.jsx)(s.h3,{id:n[1].id,children:n[1].value}),"\n",(0,r.jsxs)(s.table,{children:[(0,r.jsx)(s.thead,{children:(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.th,{children:"Field"}),(0,r.jsx)(s.th,{children:"Type"}),(0,r.jsx)(s.th,{children:"Default"}),(0,r.jsx)(s.th,{children:"Description"})]})}),(0,r.jsxs)(s.tbody,{children:[(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"enabled"})}),(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"boolean"})}),(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"false"})}),(0,r.jsx)(s.td,{children:"Whether the AI Agent is available"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"maxMessagesPerSession"})}),(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"number"})}),(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"50"})}),(0,r.jsx)(s.td,{children:"Maximum messages per chat session"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"sessionTTL"})}),(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"number"})}),(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"3600"})}),(0,r.jsx)(s.td,{children:"Session time-to-live in seconds"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"providers"})}),(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"ProviderConfig[]"})}),(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"[]"})}),(0,r.jsx)(s.td,{children:"LLM provider configurations (global only)"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"additiveRules"})}),(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"string[]"})}),(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"[]"})}),(0,r.jsx)(s.td,{children:"Extra rules appended to the system prompt"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"systemPromptOverride"})}),(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"string"})}),(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"undefined"})}),(0,r.jsx)(s.td,{children:"Full replacement for the system prompt"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"excludedTools"})}),(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"string[]"})}),(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"[]"})}),(0,r.jsx)(s.td,{children:"Tools the agent cannot use"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"excludedFilePatterns"})}),(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"string[]"})}),(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"[]"})}),(0,r.jsx)(s.td,{children:"Glob patterns for files the agent cannot access"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"maxIterations"})}),(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"number"})}),(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"20"})}),(0,r.jsx)(s.td,{children:"Maximum orchestration loop iterations (global only)"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"maxToolCalls"})}),(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"number"})}),(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"50"})}),(0,r.jsx)(s.td,{children:"Maximum total tool calls per query (global only)"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"maxRepeatedCalls"})}),(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"number"})}),(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"1"})}),(0,r.jsx)(s.td,{children:"Maximum repeated calls with same arguments before loop detection (global only)"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"compressionThreshold"})}),(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"number"})}),(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"80000"})}),(0,r.jsx)(s.td,{children:"Token count before conversation history is compressed (global only)"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"observationMaskingRecencyWindow"})}),(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"number"})}),(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"3"})}),(0,r.jsx)(s.td,{children:"Number of recent tool results preserved when masking (global only)"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"observationMaskingTokenThreshold"})}),(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"number"})}),(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"25000"})}),(0,r.jsx)(s.td,{children:"Token count before observation masking activates (global only)"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"toolExecutionTimeout"})}),(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"number"})}),(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"30000"})}),(0,r.jsx)(s.td,{children:"Tool execution timeout in milliseconds (global only)"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"toolOutputMaxChars"})}),(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"number"})}),(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"30000"})}),(0,r.jsx)(s.td,{children:"Maximum characters in tool output before truncation (global only)"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"retryBudget"})}),(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"number"})}),(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"10"})}),(0,r.jsx)(s.td,{children:"Maximum retry attempts per query on provider errors (global only)"})]})]})]}),"\n",(0,r.jsx)(s.h3,{id:n[2].id,children:n[2].value}),"\n",(0,r.jsx)(s.p,{children:"When a repository has an override, the effective configuration is computed by merging the override on top of global defaults:"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Scalar fields"})," (",(0,r.jsx)(s.code,{children:"enabled"}),", ",(0,r.jsx)(s.code,{children:"maxMessagesPerSession"}),", ",(0,r.jsx)(s.code,{children:"sessionTTL"}),", ",(0,r.jsx)(s.code,{children:"systemPromptOverride"}),") — the repository value replaces the global value."]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Array fields"})," (",(0,r.jsx)(s.code,{children:"additiveRules"}),", ",(0,r.jsx)(s.code,{children:"excludedTools"}),", ",(0,r.jsx)(s.code,{children:"excludedFilePatterns"}),") — repository values are ",(0,r.jsx)(s.strong,{children:"appended"})," to global values. Duplicates are removed automatically."]}),"\n"]}),"\n",(0,r.jsx)(s.p,{children:"Here’s a concrete example. Say your global config looks like this:"}),"\n",(0,r.jsx)(i,{codeblock:{value:'{\n  "enabled": true,\n  "maxMessagesPerSession": 50,\n  "excludedTools": ["patch_k8s_resource"], // blocked org-wide\n  "additiveRules": ["Always confirm before scaling."]\n}',lang:"json",meta:"",code:'{\n  "enabled": true,\n  "maxMessagesPerSession": 50,\n  "excludedTools": ["patch_k8s_resource"], // blocked org-wide\n  "additiveRules": ["Always confirm before scaling."]\n}',tokens:[["{","#C9D1D9"],"\n  ",['"enabled"',"#7EE787"],[":","#C9D1D9"]," ",["true","#79C0FF"],[",","#C9D1D9"],"\n  ",['"maxMessagesPerSession"',"#7EE787"],[":","#C9D1D9"]," ",["50","#79C0FF"],[",","#C9D1D9"],"\n  ",['"excludedTools"',"#7EE787"],[": [","#C9D1D9"],['"patch_k8s_resource"',"#A5D6FF"],["],","#C9D1D9"]," ",["// blocked org-wide","#8B949E"],"\n  ",['"additiveRules"',"#7EE787"],[": [","#C9D1D9"],['"Always confirm before scaling."',"#A5D6FF"],["]","#C9D1D9"],"\n",["}","#C9D1D9"]],annotations:[],themeName:"github-dark",style:{color:"#c9d1d9",background:"#0d1117",colorScheme:"dark"}}}),"\n",(0,r.jsxs)(s.p,{children:["And ",(0,r.jsx)(s.code,{children:"myorg/frontend"})," has this override:"]}),"\n",(0,r.jsx)(i,{codeblock:{value:'{\n  "maxMessagesPerSession": 100, // raises the limit\n  "excludedTools": ["update_github_file"], // blocked for this repo only\n  "additiveRules": ["Prefer CSS fixes over JS."] // repo-specific rule\n}',lang:"json",meta:"",code:'{\n  "maxMessagesPerSession": 100, // raises the limit\n  "excludedTools": ["update_github_file"], // blocked for this repo only\n  "additiveRules": ["Prefer CSS fixes over JS."] // repo-specific rule\n}',tokens:[["{","#C9D1D9"],"\n  ",['"maxMessagesPerSession"',"#7EE787"],[":","#C9D1D9"]," ",["100","#79C0FF"],[",","#C9D1D9"]," ",["// raises the limit","#8B949E"],"\n  ",['"excludedTools"',"#7EE787"],[": [","#C9D1D9"],['"update_github_file"',"#A5D6FF"],["],","#C9D1D9"]," ",["// blocked for this repo only","#8B949E"],"\n  ",['"additiveRules"',"#7EE787"],[": [","#C9D1D9"],['"Prefer CSS fixes over JS."',"#A5D6FF"],["]","#C9D1D9"]," ",["// repo-specific rule","#8B949E"],"\n",["}","#C9D1D9"]],annotations:[],themeName:"github-dark",style:{color:"#c9d1d9",background:"#0d1117",colorScheme:"dark"}}}),"\n",(0,r.jsxs)(s.p,{children:["The effective config for ",(0,r.jsx)(s.code,{children:"myorg/frontend"}),":"]}),"\n",(0,r.jsx)(i,{codeblock:{value:'{\n  "enabled": true, // inherited\n  "maxMessagesPerSession": 100, // replaced\n  "excludedTools": ["patch_k8s_resource", "update_github_file"], // combined\n  "additiveRules": [\n    "Always confirm before scaling.",\n    "Prefer CSS fixes over JS."\n  ] // combined\n}',lang:"json",meta:"",code:'{\n  "enabled": true, // inherited\n  "maxMessagesPerSession": 100, // replaced\n  "excludedTools": ["patch_k8s_resource", "update_github_file"], // combined\n  "additiveRules": [\n    "Always confirm before scaling.",\n    "Prefer CSS fixes over JS."\n  ] // combined\n}',tokens:[["{","#C9D1D9"],"\n  ",['"enabled"',"#7EE787"],[":","#C9D1D9"]," ",["true","#79C0FF"],[",","#C9D1D9"]," ",["// inherited","#8B949E"],"\n  ",['"maxMessagesPerSession"',"#7EE787"],[":","#C9D1D9"]," ",["100","#79C0FF"],[",","#C9D1D9"]," ",["// replaced","#8B949E"],"\n  ",['"excludedTools"',"#7EE787"],[": [","#C9D1D9"],['"patch_k8s_resource"',"#A5D6FF"],[",","#C9D1D9"]," ",['"update_github_file"',"#A5D6FF"],["],","#C9D1D9"]," ",["// combined","#8B949E"],"\n  ",['"additiveRules"',"#7EE787"],[": [","#C9D1D9"],"\n    ",['"Always confirm before scaling."',"#A5D6FF"],[",","#C9D1D9"],"\n    ",['"Prefer CSS fixes over JS."',"#A5D6FF"],"\n  ",["]","#C9D1D9"]," ",["// combined","#8B949E"],"\n",["}","#C9D1D9"]],annotations:[],themeName:"github-dark",style:{color:"#c9d1d9",background:"#0d1117",colorScheme:"dark"}}}),"\n",(0,r.jsx)(s.h3,{id:n[3].id,children:n[3].value}),"\n",(0,r.jsxs)(s.p,{children:["The ",(0,r.jsx)(s.code,{children:"providers"})," field defines which LLM providers and models are available. This is a ",(0,r.jsx)(s.strong,{children:"global-only"})," field — repository overrides cannot change provider configuration."]}),"\n",(0,r.jsx)(s.p,{children:"Each provider entry has the following structure:"}),"\n",(0,r.jsxs)(s.table,{children:[(0,r.jsx)(s.thead,{children:(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.th,{children:"Field"}),(0,r.jsx)(s.th,{children:"Type"}),(0,r.jsx)(s.th,{children:"Required"}),(0,r.jsx)(s.th,{children:"Description"})]})}),(0,r.jsxs)(s.tbody,{children:[(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"name"})}),(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"string"})}),(0,r.jsx)(s.td,{children:"Yes"}),(0,r.jsxs)(s.td,{children:["Provider identifier (",(0,r.jsx)(s.code,{children:"anthropic"}),", ",(0,r.jsx)(s.code,{children:"openai"}),", ",(0,r.jsx)(s.code,{children:"gemini"}),")"]})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"enabled"})}),(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"boolean"})}),(0,r.jsx)(s.td,{children:"Yes"}),(0,r.jsx)(s.td,{children:"Whether this provider is available"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"apiKeyEnvVar"})}),(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"string"})}),(0,r.jsx)(s.td,{children:"Yes"}),(0,r.jsx)(s.td,{children:"Environment variable containing the API key"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"models"})}),(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"ModelConfig[]"})}),(0,r.jsx)(s.td,{children:"Yes"}),(0,r.jsx)(s.td,{children:"List of models for this provider"})]})]})]}),"\n",(0,r.jsx)(s.p,{children:"Each model entry:"}),"\n",(0,r.jsxs)(s.table,{children:[(0,r.jsx)(s.thead,{children:(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.th,{children:"Field"}),(0,r.jsx)(s.th,{children:"Type"}),(0,r.jsx)(s.th,{children:"Required"}),(0,r.jsx)(s.th,{children:"Description"})]})}),(0,r.jsxs)(s.tbody,{children:[(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"id"})}),(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"string"})}),(0,r.jsx)(s.td,{children:"Yes"}),(0,r.jsx)(s.td,{children:"Model identifier sent to the provider API"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"displayName"})}),(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"string"})}),(0,r.jsx)(s.td,{children:"Yes"}),(0,r.jsx)(s.td,{children:"Human-readable name shown in the UI dropdown"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"enabled"})}),(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"boolean"})}),(0,r.jsx)(s.td,{children:"Yes"}),(0,r.jsx)(s.td,{children:"Whether this model is selectable"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"default"})}),(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"boolean"})}),(0,r.jsx)(s.td,{children:"Yes"}),(0,r.jsx)(s.td,{children:"Whether this is the default model (one per provider)"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"maxTokens"})}),(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"integer"})}),(0,r.jsx)(s.td,{children:"Yes"}),(0,r.jsx)(s.td,{children:"Maximum output tokens for the model"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"inputCostPerMillion"})}),(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"number"})}),(0,r.jsx)(s.td,{children:"No"}),(0,r.jsx)(s.td,{children:"Cost per 1M input tokens (USD). Enables cost display in the UI"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"outputCostPerMillion"})}),(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"number"})}),(0,r.jsx)(s.td,{children:"No"}),(0,r.jsx)(s.td,{children:"Cost per 1M output tokens (USD). Enables cost display in the UI"})]})]})]}),"\n",(0,r.jsx)(o.P,{type:"info",children:(0,r.jsxs)(s.p,{children:["When ",(0,r.jsx)(s.code,{children:"inputCostPerMillion"})," and ",(0,r.jsx)(s.code,{children:"outputCostPerMillion"})," are both set for a\nmodel, the UI displays a computed cost alongside token counts in the X-Ray\ndebug panel. If either field is omitted, cost is not shown."]})}),"\n",(0,r.jsx)(s.p,{children:"Example with pricing configured:"}),"\n",(0,r.jsx)(i,{codeblock:{value:'{\n  "providers": [\n    {\n      "name": "anthropic",\n      "enabled": true,\n      "apiKeyEnvVar": "ANTHROPIC_API_KEY",\n      "models": [\n        {\n          "id": "claude-sonnet-4-20250514",\n          "displayName": "Claude Sonnet",\n          "enabled": true,\n          "default": true,\n          "maxTokens": 8096,\n          "inputCostPerMillion": 3.0,\n          "outputCostPerMillion": 15.0\n        }\n      ]\n    },\n    {\n      "name": "gemini",\n      "enabled": true,\n      "apiKeyEnvVar": "GEMINI_API_KEY",\n      "models": [\n        {\n          "id": "gemini-2.5-pro-preview-05-06",\n          "displayName": "Gemini 2.5 Pro",\n          "enabled": true,\n          "default": true,\n          "maxTokens": 65536,\n          "inputCostPerMillion": 1.25,\n          "outputCostPerMillion": 10.0\n        }\n      ]\n    }\n  ]\n}',lang:"json",meta:"",code:'{\n  "providers": [\n    {\n      "name": "anthropic",\n      "enabled": true,\n      "apiKeyEnvVar": "ANTHROPIC_API_KEY",\n      "models": [\n        {\n          "id": "claude-sonnet-4-20250514",\n          "displayName": "Claude Sonnet",\n          "enabled": true,\n          "default": true,\n          "maxTokens": 8096,\n          "inputCostPerMillion": 3.0,\n          "outputCostPerMillion": 15.0\n        }\n      ]\n    },\n    {\n      "name": "gemini",\n      "enabled": true,\n      "apiKeyEnvVar": "GEMINI_API_KEY",\n      "models": [\n        {\n          "id": "gemini-2.5-pro-preview-05-06",\n          "displayName": "Gemini 2.5 Pro",\n          "enabled": true,\n          "default": true,\n          "maxTokens": 65536,\n          "inputCostPerMillion": 1.25,\n          "outputCostPerMillion": 10.0\n        }\n      ]\n    }\n  ]\n}',tokens:[["{","#C9D1D9"],"\n  ",['"providers"',"#7EE787"],[": [","#C9D1D9"],"\n    ",["{","#C9D1D9"],"\n      ",['"name"',"#7EE787"],[":","#C9D1D9"]," ",['"anthropic"',"#A5D6FF"],[",","#C9D1D9"],"\n      ",['"enabled"',"#7EE787"],[":","#C9D1D9"]," ",["true","#79C0FF"],[",","#C9D1D9"],"\n      ",['"apiKeyEnvVar"',"#7EE787"],[":","#C9D1D9"]," ",['"ANTHROPIC_API_KEY"',"#A5D6FF"],[",","#C9D1D9"],"\n      ",['"models"',"#7EE787"],[": [","#C9D1D9"],"\n        ",["{","#C9D1D9"],"\n          ",['"id"',"#7EE787"],[":","#C9D1D9"]," ",['"claude-sonnet-4-20250514"',"#A5D6FF"],[",","#C9D1D9"],"\n          ",['"displayName"',"#7EE787"],[":","#C9D1D9"]," ",['"Claude Sonnet"',"#A5D6FF"],[",","#C9D1D9"],"\n          ",['"enabled"',"#7EE787"],[":","#C9D1D9"]," ",["true","#79C0FF"],[",","#C9D1D9"],"\n          ",['"default"',"#7EE787"],[":","#C9D1D9"]," ",["true","#79C0FF"],[",","#C9D1D9"],"\n          ",['"maxTokens"',"#7EE787"],[":","#C9D1D9"]," ",["8096","#79C0FF"],[",","#C9D1D9"],"\n          ",['"inputCostPerMillion"',"#7EE787"],[":","#C9D1D9"]," ",["3.0","#79C0FF"],[",","#C9D1D9"],"\n          ",['"outputCostPerMillion"',"#7EE787"],[":","#C9D1D9"]," ",["15.0","#79C0FF"],"\n        ",["}","#C9D1D9"],"\n      ",["]","#C9D1D9"],"\n    ",["},","#C9D1D9"],"\n    ",["{","#C9D1D9"],"\n      ",['"name"',"#7EE787"],[":","#C9D1D9"]," ",['"gemini"',"#A5D6FF"],[",","#C9D1D9"],"\n      ",['"enabled"',"#7EE787"],[":","#C9D1D9"]," ",["true","#79C0FF"],[",","#C9D1D9"],"\n      ",['"apiKeyEnvVar"',"#7EE787"],[":","#C9D1D9"]," ",['"GEMINI_API_KEY"',"#A5D6FF"],[",","#C9D1D9"],"\n      ",['"models"',"#7EE787"],[": [","#C9D1D9"],"\n        ",["{","#C9D1D9"],"\n          ",['"id"',"#7EE787"],[":","#C9D1D9"]," ",['"gemini-2.5-pro-preview-05-06"',"#A5D6FF"],[",","#C9D1D9"],"\n          ",['"displayName"',"#7EE787"],[":","#C9D1D9"]," ",['"Gemini 2.5 Pro"',"#A5D6FF"],[",","#C9D1D9"],"\n          ",['"enabled"',"#7EE787"],[":","#C9D1D9"]," ",["true","#79C0FF"],[",","#C9D1D9"],"\n          ",['"default"',"#7EE787"],[":","#C9D1D9"]," ",["true","#79C0FF"],[",","#C9D1D9"],"\n          ",['"maxTokens"',"#7EE787"],[":","#C9D1D9"]," ",["65536","#79C0FF"],[",","#C9D1D9"],"\n          ",['"inputCostPerMillion"',"#7EE787"],[":","#C9D1D9"]," ",["1.25","#79C0FF"],[",","#C9D1D9"],"\n          ",['"outputCostPerMillion"',"#7EE787"],[":","#C9D1D9"]," ",["10.0","#79C0FF"],"\n        ",["}","#C9D1D9"],"\n      ",["]","#C9D1D9"],"\n    ",["}","#C9D1D9"],"\n  ",["]","#C9D1D9"],"\n",["}","#C9D1D9"]],annotations:[],themeName:"github-dark",style:{color:"#c9d1d9",background:"#0d1117",colorScheme:"dark"}}}),"\n",(0,r.jsx)(s.h3,{id:n[4].id,children:n[4].value}),"\n",(0,r.jsx)(o.P,{type:"info",children:(0,r.jsx)(s.p,{children:"Configurations are cached at three layers: in-memory (30 seconds), Redis (5\nminutes), and the database (source of truth). Updating via the API immediately\ninvalidates both the Redis and in-memory caches for that repository."})}),"\n",(0,r.jsx)(s.hr,{}),"\n",(0,r.jsx)(s.h2,{id:n[5].id,children:n[5].value}),"\n",(0,r.jsx)(s.h3,{id:n[6].id,children:n[6].value}),"\n",(0,r.jsxs)(s.p,{children:["The ",(0,r.jsx)(s.code,{children:"additiveRules"})," field accepts an array of strings appended to the system prompt. Use this to add organization-specific guidelines, restrict behaviors, or provide extra context."]}),"\n",(0,r.jsxs)(s.p,{children:["Because additive rules use ",(0,r.jsx)(s.strong,{children:"additive merge"}),", global rules and repository rules are combined. Set organization-wide rules globally and layer project-specific rules per repository."]}),"\n",(0,r.jsx)(i,{codeblock:{value:'{\n  "additiveRules": [\n    "Always check pod resource limits before suggesting scaling changes.",\n    "Prefer rolling restarts over full redeployments."\n  ]\n}',lang:"json",meta:"",code:'{\n  "additiveRules": [\n    "Always check pod resource limits before suggesting scaling changes.",\n    "Prefer rolling restarts over full redeployments."\n  ]\n}',tokens:[["{","#C9D1D9"],"\n  ",['"additiveRules"',"#7EE787"],[": [","#C9D1D9"],"\n    ",['"Always check pod resource limits before suggesting scaling changes."',"#A5D6FF"],[",","#C9D1D9"],"\n    ",['"Prefer rolling restarts over full redeployments."',"#A5D6FF"],"\n  ",["]","#C9D1D9"],"\n",["}","#C9D1D9"]],annotations:[],themeName:"github-dark",style:{color:"#c9d1d9",background:"#0d1117",colorScheme:"dark"}}}),"\n",(0,r.jsx)(s.h3,{id:n[7].id,children:n[7].value}),"\n",(0,r.jsxs)(s.p,{children:["The ",(0,r.jsx)(s.code,{children:"systemPromptOverride"})," field replaces the entire default system prompt. This is a ",(0,r.jsx)(s.strong,{children:"full replacement"}),", not additive."]}),"\n",(0,r.jsx)(o.P,{type:"warning",children:(0,r.jsxs)(s.p,{children:["Setting ",(0,r.jsx)(s.code,{children:"systemPromptOverride"})," replaces the entire built-in system prompt,\nincluding safety instructions. Use this only when you need complete control\nover the agent’s behavior. Maximum length is ",(0,r.jsx)(s.strong,{children:"50,000 characters"}),"."]})}),"\n",(0,r.jsx)(s.p,{children:"When set at the repository level, the override applies only to that repository. The scalar merge rule means the repository value fully replaces any global override."}),"\n",(0,r.jsx)(s.hr,{}),"\n",(0,r.jsx)(s.h2,{id:n[8].id,children:n[8].value}),"\n",(0,r.jsx)(s.h3,{id:n[9].id,children:n[9].value}),"\n",(0,r.jsxs)(s.p,{children:["The ",(0,r.jsx)(s.code,{children:"excludedTools"})," field prevents the agent from using specific tools. This is useful for restricting write operations in sensitive repositories."]}),"\n",(0,r.jsx)(s.p,{children:"Available tool names:"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:(0,r.jsx)(s.code,{children:"get_k8s_resources"})}),"\n",(0,r.jsx)(s.li,{children:(0,r.jsx)(s.code,{children:"get_lifecycle_logs"})}),"\n",(0,r.jsx)(s.li,{children:(0,r.jsx)(s.code,{children:"patch_k8s_resource"})}),"\n",(0,r.jsx)(s.li,{children:(0,r.jsx)(s.code,{children:"query_database"})}),"\n",(0,r.jsx)(s.li,{children:(0,r.jsx)(s.code,{children:"get_github_file"})}),"\n",(0,r.jsx)(s.li,{children:(0,r.jsx)(s.code,{children:"list_github_directory"})}),"\n",(0,r.jsx)(s.li,{children:(0,r.jsx)(s.code,{children:"update_github_file"})}),"\n",(0,r.jsx)(s.li,{children:(0,r.jsx)(s.code,{children:"get_issue_comment"})}),"\n"]}),"\n",(0,r.jsx)(o.P,{type:"warning",children:(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.code,{children:"query_database"})," is a ",(0,r.jsx)(s.strong,{children:"core tool"})," and cannot be excluded. Attempting to\nexclude it returns a ",(0,r.jsx)(s.code,{children:"400"})," error."]})}),"\n",(0,r.jsx)(s.p,{children:"Because excluded tools use additive merge, tools excluded at the global level cannot be “un-excluded” at the repository level."}),"\n",(0,r.jsx)(s.h3,{id:n[10].id,children:n[10].value}),"\n",(0,r.jsxs)(s.p,{children:["The ",(0,r.jsx)(s.code,{children:"excludedFilePatterns"})," field accepts glob patterns that restrict which files the agent can access through the GitHub tools."]}),"\n",(0,r.jsx)(s.p,{children:(0,r.jsx)(s.strong,{children:"Validation rules:"})}),"\n",(0,r.jsxs)(s.table,{children:[(0,r.jsx)(s.thead,{children:(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.th,{children:"Rule"}),(0,r.jsx)(s.th,{children:"Limit"})]})}),(0,r.jsxs)(s.tbody,{children:[(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"Maximum number of patterns"}),(0,r.jsx)(s.td,{children:"50"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"Maximum pattern length"}),(0,r.jsx)(s.td,{children:"200 characters"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"Forbidden patterns"}),(0,r.jsxs)(s.td,{children:[(0,r.jsx)(s.code,{children:"*"}),", ",(0,r.jsx)(s.code,{children:"**"}),", ",(0,r.jsx)(s.code,{children:"**/*"})," (overly broad)"]})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"Path traversal"}),(0,r.jsxs)(s.td,{children:[(0,r.jsx)(s.code,{children:"../"})," is not allowed"]})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"Absolute paths"}),(0,r.jsxs)(s.td,{children:["Patterns starting with ",(0,r.jsx)(s.code,{children:"/"})," not allowed"]})]})]})]}),"\n",(0,r.jsx)(i,{codeblock:{value:'{\n  "excludedFilePatterns": [\n    "*.env", // environment files\n    "secrets/**", // secrets directory\n    "config/production.*" // production configs\n  ]\n}',lang:"json",meta:"",code:'{\n  "excludedFilePatterns": [\n    "*.env", // environment files\n    "secrets/**", // secrets directory\n    "config/production.*" // production configs\n  ]\n}',tokens:[["{","#C9D1D9"],"\n  ",['"excludedFilePatterns"',"#7EE787"],[": [","#C9D1D9"],"\n    ",['"*.env"',"#A5D6FF"],[",","#C9D1D9"]," ",["// environment files","#8B949E"],"\n    ",['"secrets/**"',"#A5D6FF"],[",","#C9D1D9"]," ",["// secrets directory","#8B949E"],"\n    ",['"config/production.*"',"#A5D6FF"]," ",["// production configs","#8B949E"],"\n  ",["]","#C9D1D9"],"\n",["}","#C9D1D9"]],annotations:[],themeName:"github-dark",style:{color:"#c9d1d9",background:"#0d1117",colorScheme:"dark"}}}),"\n",(0,r.jsx)(s.p,{children:"Like other array fields, file patterns use additive merge. Global patterns and repository patterns are combined and deduplicated."}),"\n",(0,r.jsx)(s.hr,{}),"\n",(0,r.jsx)(s.h2,{id:n[11].id,children:n[11].value}),"\n",(0,r.jsxs)(s.p,{children:["These fields control the agent’s internal behavior. They are all ",(0,r.jsx)(s.strong,{children:"global-only"})," settings — repository overrides cannot change them. If omitted, the defaults below are used."]}),"\n",(0,r.jsx)(s.h3,{id:n[12].id,children:n[12].value}),"\n",(0,r.jsx)(s.p,{children:"Controls for the agent’s tool-calling loop that prevent runaway behavior."}),"\n",(0,r.jsxs)(s.table,{children:[(0,r.jsx)(s.thead,{children:(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.th,{children:"Field"}),(0,r.jsx)(s.th,{children:"Default"}),(0,r.jsx)(s.th,{children:"Description"})]})}),(0,r.jsxs)(s.tbody,{children:[(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"maxIterations"})}),(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"20"})}),(0,r.jsx)(s.td,{children:"Maximum number of LLM round-trips in a single query. Prevents runaway conversations."})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"maxToolCalls"})}),(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"50"})}),(0,r.jsx)(s.td,{children:"Maximum total tool invocations across all iterations. Caps resource usage for broad investigations."})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"maxRepeatedCalls"})}),(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"1"})}),(0,r.jsx)(s.td,{children:"How many times the same tool can be called with identical arguments before loop detection kicks in."})]})]})]}),"\n",(0,r.jsx)(s.p,{children:"When a limit is hit, the agent stops and returns an error message to the user explaining what happened."}),"\n",(0,r.jsx)(s.h3,{id:n[13].id,children:n[13].value}),"\n",(0,r.jsx)(s.p,{children:"Controls how the agent manages conversation context to stay within LLM token limits."}),"\n",(0,r.jsxs)(s.table,{children:[(0,r.jsx)(s.thead,{children:(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.th,{children:"Field"}),(0,r.jsx)(s.th,{children:"Default"}),(0,r.jsx)(s.th,{children:"Description"})]})}),(0,r.jsxs)(s.tbody,{children:[(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"compressionThreshold"})}),(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"80000"})}),(0,r.jsx)(s.td,{children:"Token count at which the conversation history is summarized into a compact form. Higher values preserve more context but use more tokens."})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"observationMaskingRecencyWindow"})}),(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"3"})}),(0,r.jsx)(s.td,{children:"Number of recent tool results kept in full when masking older observations. Older results are replaced with placeholders."})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"observationMaskingTokenThreshold"})}),(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"25000"})}),(0,r.jsx)(s.td,{children:"Token count at which observation masking activates. Below this threshold, all tool results are kept in full."})]})]})]}),"\n",(0,r.jsx)(s.h3,{id:n[14].id,children:n[14].value}),"\n",(0,r.jsx)(s.p,{children:"Controls for tool execution behavior and output handling."}),"\n",(0,r.jsxs)(s.table,{children:[(0,r.jsx)(s.thead,{children:(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.th,{children:"Field"}),(0,r.jsx)(s.th,{children:"Default"}),(0,r.jsx)(s.th,{children:"Description"})]})}),(0,r.jsxs)(s.tbody,{children:[(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"toolExecutionTimeout"})}),(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"30000"})}),(0,r.jsx)(s.td,{children:"Maximum time in milliseconds a single tool call can run before being terminated. Increase for slow K8s clusters or MCP servers."})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"toolOutputMaxChars"})}),(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"30000"})}),(0,r.jsx)(s.td,{children:"Maximum characters in a tool’s output before truncation. Larger values give the agent more data but cost more tokens."})]})]})]}),"\n",(0,r.jsx)(s.h3,{id:n[15].id,children:n[15].value}),"\n",(0,r.jsx)(s.p,{children:"Controls for error recovery when communicating with LLM providers."}),"\n",(0,r.jsxs)(s.table,{children:[(0,r.jsx)(s.thead,{children:(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.th,{children:"Field"}),(0,r.jsx)(s.th,{children:"Default"}),(0,r.jsx)(s.th,{children:"Description"})]})}),(0,r.jsx)(s.tbody,{children:(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"retryBudget"})}),(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"10"})}),(0,r.jsx)(s.td,{children:"Maximum retry attempts per query when the LLM provider returns transient errors. Higher values improve reliability at the cost of latency."})]})})]}),"\n",(0,r.jsx)(i,{codeblock:{value:'{\n  "maxIterations": 30,\n  "maxToolCalls": 80,\n  "maxRepeatedCalls": 2,\n  "compressionThreshold": 100000,\n  "observationMaskingRecencyWindow": 5,\n  "observationMaskingTokenThreshold": 40000,\n  "toolExecutionTimeout": 60000,\n  "toolOutputMaxChars": 50000,\n  "retryBudget": 15\n}',lang:"json",meta:"",code:'{\n  "maxIterations": 30,\n  "maxToolCalls": 80,\n  "maxRepeatedCalls": 2,\n  "compressionThreshold": 100000,\n  "observationMaskingRecencyWindow": 5,\n  "observationMaskingTokenThreshold": 40000,\n  "toolExecutionTimeout": 60000,\n  "toolOutputMaxChars": 50000,\n  "retryBudget": 15\n}',tokens:[["{","#C9D1D9"],"\n  ",['"maxIterations"',"#7EE787"],[":","#C9D1D9"]," ",["30","#79C0FF"],[",","#C9D1D9"],"\n  ",['"maxToolCalls"',"#7EE787"],[":","#C9D1D9"]," ",["80","#79C0FF"],[",","#C9D1D9"],"\n  ",['"maxRepeatedCalls"',"#7EE787"],[":","#C9D1D9"]," ",["2","#79C0FF"],[",","#C9D1D9"],"\n  ",['"compressionThreshold"',"#7EE787"],[":","#C9D1D9"]," ",["100000","#79C0FF"],[",","#C9D1D9"],"\n  ",['"observationMaskingRecencyWindow"',"#7EE787"],[":","#C9D1D9"]," ",["5","#79C0FF"],[",","#C9D1D9"],"\n  ",['"observationMaskingTokenThreshold"',"#7EE787"],[":","#C9D1D9"]," ",["40000","#79C0FF"],[",","#C9D1D9"],"\n  ",['"toolExecutionTimeout"',"#7EE787"],[":","#C9D1D9"]," ",["60000","#79C0FF"],[",","#C9D1D9"],"\n  ",['"toolOutputMaxChars"',"#7EE787"],[":","#C9D1D9"]," ",["50000","#79C0FF"],[",","#C9D1D9"],"\n  ",['"retryBudget"',"#7EE787"],[":","#C9D1D9"]," ",["15","#79C0FF"],"\n",["}","#C9D1D9"]],annotations:[],themeName:"github-dark",style:{color:"#c9d1d9",background:"#0d1117",colorScheme:"dark"}}}),"\n",(0,r.jsx)(o.P,{type:"info",children:(0,r.jsx)(s.p,{children:"Increasing these limits allows the agent to perform deeper investigations but\nconsumes more LLM tokens. Lower values are safer for cost control."})}),"\n",(0,r.jsx)(s.hr,{}),"\n",(0,r.jsx)(s.h2,{id:n[16].id,children:n[16].value}),"\n",(0,r.jsxs)(s.p,{children:["All endpoints are under ",(0,r.jsx)(s.code,{children:"/api/v2/ai/agent-config"}),". Request and response bodies use JSON."]}),"\n",(0,r.jsx)(s.h3,{id:n[17].id,children:n[17].value}),"\n",(0,r.jsx)(s.p,{children:(0,r.jsx)(s.strong,{children:"Get the current global config:"})}),"\n",(0,r.jsx)(i,{codeblock:{value:"GET /api/v2/ai/agent-config",lang:"txt",meta:"",code:"GET /api/v2/ai/agent-config",tokens:[["GET /api/v2/ai/agent-config","#C9D1D9"]],annotations:[],themeName:"github-dark",style:{color:"#c9d1d9",background:"#0d1117",colorScheme:"dark"}}}),"\n",(0,r.jsx)(i,{codeblock:{value:'{\n  "status": "success",\n  "data": {\n    "enabled": true,\n    "providers": [],\n    "maxMessagesPerSession": 50,\n    "sessionTTL": 3600,\n    "additiveRules": [],\n    "excludedTools": [],\n    "excludedFilePatterns": []\n  }\n}',lang:"json",meta:"",code:'{\n  "status": "success",\n  "data": {\n    "enabled": true,\n    "providers": [],\n    "maxMessagesPerSession": 50,\n    "sessionTTL": 3600,\n    "additiveRules": [],\n    "excludedTools": [],\n    "excludedFilePatterns": []\n  }\n}',tokens:[["{","#C9D1D9"],"\n  ",['"status"',"#7EE787"],[":","#C9D1D9"]," ",['"success"',"#A5D6FF"],[",","#C9D1D9"],"\n  ",['"data"',"#7EE787"],[": {","#C9D1D9"],"\n    ",['"enabled"',"#7EE787"],[":","#C9D1D9"]," ",["true","#79C0FF"],[",","#C9D1D9"],"\n    ",['"providers"',"#7EE787"],[": [],","#C9D1D9"],"\n    ",['"maxMessagesPerSession"',"#7EE787"],[":","#C9D1D9"]," ",["50","#79C0FF"],[",","#C9D1D9"],"\n    ",['"sessionTTL"',"#7EE787"],[":","#C9D1D9"]," ",["3600","#79C0FF"],[",","#C9D1D9"],"\n    ",['"additiveRules"',"#7EE787"],[": [],","#C9D1D9"],"\n    ",['"excludedTools"',"#7EE787"],[": [],","#C9D1D9"],"\n    ",['"excludedFilePatterns"',"#7EE787"],[": []","#C9D1D9"],"\n  ",["}","#C9D1D9"],"\n",["}","#C9D1D9"]],annotations:[],themeName:"github-dark",style:{color:"#c9d1d9",background:"#0d1117",colorScheme:"dark"}}}),"\n",(0,r.jsx)(s.p,{children:(0,r.jsx)(s.strong,{children:"Update the global config:"})}),"\n",(0,r.jsx)(i,{codeblock:{value:"PUT /api/v2/ai/agent-config",lang:"txt",meta:"",code:"PUT /api/v2/ai/agent-config",tokens:[["PUT /api/v2/ai/agent-config","#C9D1D9"]],annotations:[],themeName:"github-dark",style:{color:"#c9d1d9",background:"#0d1117",colorScheme:"dark"}}}),"\n",(0,r.jsx)(i,{codeblock:{value:'{\n  "enabled": true,\n  "providers": [],\n  "maxMessagesPerSession": 100, // raise the session limit\n  "sessionTTL": 7200 // 2 hours\n}',lang:"json",meta:"",code:'{\n  "enabled": true,\n  "providers": [],\n  "maxMessagesPerSession": 100, // raise the session limit\n  "sessionTTL": 7200 // 2 hours\n}',tokens:[["{","#C9D1D9"],"\n  ",['"enabled"',"#7EE787"],[":","#C9D1D9"]," ",["true","#79C0FF"],[",","#C9D1D9"],"\n  ",['"providers"',"#7EE787"],[": [],","#C9D1D9"],"\n  ",['"maxMessagesPerSession"',"#7EE787"],[":","#C9D1D9"]," ",["100","#79C0FF"],[",","#C9D1D9"]," ",["// raise the session limit","#8B949E"],"\n  ",['"sessionTTL"',"#7EE787"],[":","#C9D1D9"]," ",["7200","#79C0FF"]," ",["// 2 hours","#8B949E"],"\n",["}","#C9D1D9"]],annotations:[],themeName:"github-dark",style:{color:"#c9d1d9",background:"#0d1117",colorScheme:"dark"}}}),"\n",(0,r.jsxs)(s.p,{children:["Returns the updated configuration on success. Returns ",(0,r.jsx)(s.code,{children:"400"})," for validation failures (invalid schema, prompt too long, core tool exclusion, bad file patterns)."]}),"\n",(0,r.jsx)(s.hr,{}),"\n",(0,r.jsx)(s.h3,{id:n[18].id,children:n[18].value}),"\n",(0,r.jsx)(s.p,{children:(0,r.jsx)(s.strong,{children:"List all repository overrides:"})}),"\n",(0,r.jsx)(i,{codeblock:{value:"GET /api/v2/ai/agent-config/repos",lang:"txt",meta:"",code:"GET /api/v2/ai/agent-config/repos",tokens:[["GET /api/v2/ai/agent-config/repos","#C9D1D9"]],annotations:[],themeName:"github-dark",style:{color:"#c9d1d9",background:"#0d1117",colorScheme:"dark"}}}),"\n",(0,r.jsx)(i,{codeblock:{value:'{\n  "status": "success",\n  "data": [\n    {\n      "id": 1,\n      "repositoryFullName": "myorg/myrepo",\n      "config": {\n        "enabled": false,\n        "excludedTools": ["patch_k8s_resource"]\n      },\n      "createdAt": "2025-01-15T10:00:00.000Z",\n      "updatedAt": "2025-01-15T10:00:00.000Z"\n    }\n  ]\n}',lang:"json",meta:"",code:'{\n  "status": "success",\n  "data": [\n    {\n      "id": 1,\n      "repositoryFullName": "myorg/myrepo",\n      "config": {\n        "enabled": false,\n        "excludedTools": ["patch_k8s_resource"]\n      },\n      "createdAt": "2025-01-15T10:00:00.000Z",\n      "updatedAt": "2025-01-15T10:00:00.000Z"\n    }\n  ]\n}',tokens:[["{","#C9D1D9"],"\n  ",['"status"',"#7EE787"],[":","#C9D1D9"]," ",['"success"',"#A5D6FF"],[",","#C9D1D9"],"\n  ",['"data"',"#7EE787"],[": [","#C9D1D9"],"\n    ",["{","#C9D1D9"],"\n      ",['"id"',"#7EE787"],[":","#C9D1D9"]," ",["1","#79C0FF"],[",","#C9D1D9"],"\n      ",['"repositoryFullName"',"#7EE787"],[":","#C9D1D9"]," ",['"myorg/myrepo"',"#A5D6FF"],[",","#C9D1D9"],"\n      ",['"config"',"#7EE787"],[": {","#C9D1D9"],"\n        ",['"enabled"',"#7EE787"],[":","#C9D1D9"]," ",["false","#79C0FF"],[",","#C9D1D9"],"\n        ",['"excludedTools"',"#7EE787"],[": [","#C9D1D9"],['"patch_k8s_resource"',"#A5D6FF"],["]","#C9D1D9"],"\n      ",["},","#C9D1D9"],"\n      ",['"createdAt"',"#7EE787"],[":","#C9D1D9"]," ",['"2025-01-15T10:00:00.000Z"',"#A5D6FF"],[",","#C9D1D9"],"\n      ",['"updatedAt"',"#7EE787"],[":","#C9D1D9"]," ",['"2025-01-15T10:00:00.000Z"',"#A5D6FF"],"\n    ",["}","#C9D1D9"],"\n  ",["]","#C9D1D9"],"\n",["}","#C9D1D9"]],annotations:[],themeName:"github-dark",style:{color:"#c9d1d9",background:"#0d1117",colorScheme:"dark"}}}),"\n",(0,r.jsx)(s.p,{children:(0,r.jsx)(s.strong,{children:"Get a single repository override:"})}),"\n",(0,r.jsx)(i,{codeblock:{value:"GET /api/v2/ai/agent-config/repos/{owner}/{repo}",lang:"txt",meta:"",code:"GET /api/v2/ai/agent-config/repos/{owner}/{repo}",tokens:[["GET /api/v2/ai/agent-config/repos/{owner}/{repo}","#C9D1D9"]],annotations:[],themeName:"github-dark",style:{color:"#c9d1d9",background:"#0d1117",colorScheme:"dark"}}}),"\n",(0,r.jsxs)(s.p,{children:["Returns only the override fields, not the merged result. Returns ",(0,r.jsx)(s.code,{children:"404"})," if no override exists."]}),"\n",(0,r.jsx)(s.p,{children:(0,r.jsx)(s.strong,{children:"Get the effective (merged) configuration:"})}),"\n",(0,r.jsx)(i,{codeblock:{value:"GET /api/v2/ai/agent-config/repos/{owner}/{repo}/effective",lang:"txt",meta:"",code:"GET /api/v2/ai/agent-config/repos/{owner}/{repo}/effective",tokens:[["GET /api/v2/ai/agent-config/repos/{owner}/{repo}/effective","#C9D1D9"]],annotations:[],themeName:"github-dark",style:{color:"#c9d1d9",background:"#0d1117",colorScheme:"dark"}}}),"\n",(0,r.jsx)(i,{codeblock:{value:'{\n  "status": "success",\n  "data": {\n    "repoFullName": "myorg/myrepo",\n    "effectiveConfig": {\n      "enabled": false,\n      "providers": [],\n      "maxMessagesPerSession": 50,\n      "sessionTTL": 3600,\n      "additiveRules": [],\n      "excludedTools": ["patch_k8s_resource"], // merged from global + repo\n      "excludedFilePatterns": []\n    }\n  }\n}',lang:"json",meta:"",code:'{\n  "status": "success",\n  "data": {\n    "repoFullName": "myorg/myrepo",\n    "effectiveConfig": {\n      "enabled": false,\n      "providers": [],\n      "maxMessagesPerSession": 50,\n      "sessionTTL": 3600,\n      "additiveRules": [],\n      "excludedTools": ["patch_k8s_resource"], // merged from global + repo\n      "excludedFilePatterns": []\n    }\n  }\n}',tokens:[["{","#C9D1D9"],"\n  ",['"status"',"#7EE787"],[":","#C9D1D9"]," ",['"success"',"#A5D6FF"],[",","#C9D1D9"],"\n  ",['"data"',"#7EE787"],[": {","#C9D1D9"],"\n    ",['"repoFullName"',"#7EE787"],[":","#C9D1D9"]," ",['"myorg/myrepo"',"#A5D6FF"],[",","#C9D1D9"],"\n    ",['"effectiveConfig"',"#7EE787"],[": {","#C9D1D9"],"\n      ",['"enabled"',"#7EE787"],[":","#C9D1D9"]," ",["false","#79C0FF"],[",","#C9D1D9"],"\n      ",['"providers"',"#7EE787"],[": [],","#C9D1D9"],"\n      ",['"maxMessagesPerSession"',"#7EE787"],[":","#C9D1D9"]," ",["50","#79C0FF"],[",","#C9D1D9"],"\n      ",['"sessionTTL"',"#7EE787"],[":","#C9D1D9"]," ",["3600","#79C0FF"],[",","#C9D1D9"],"\n      ",['"additiveRules"',"#7EE787"],[": [],","#C9D1D9"],"\n      ",['"excludedTools"',"#7EE787"],[": [","#C9D1D9"],['"patch_k8s_resource"',"#A5D6FF"],["],","#C9D1D9"]," ",["// merged from global + repo","#8B949E"],"\n      ",['"excludedFilePatterns"',"#7EE787"],[": []","#C9D1D9"],"\n    ",["}","#C9D1D9"],"\n  ",["}","#C9D1D9"],"\n",["}","#C9D1D9"]],annotations:[],themeName:"github-dark",style:{color:"#c9d1d9",background:"#0d1117",colorScheme:"dark"}}}),"\n",(0,r.jsx)(o.P,{type:"tip",children:(0,r.jsxs)(s.p,{children:["Use the ",(0,r.jsx)(s.code,{children:"/effective"})," endpoint to verify exactly what configuration a\nrepository uses at runtime, after merge."]})}),"\n",(0,r.jsx)(s.p,{children:(0,r.jsx)(s.strong,{children:"Create or update a repository override:"})}),"\n",(0,r.jsx)(i,{codeblock:{value:"PUT /api/v2/ai/agent-config/repos/{owner}/{repo}",lang:"txt",meta:"",code:"PUT /api/v2/ai/agent-config/repos/{owner}/{repo}",tokens:[["PUT /api/v2/ai/agent-config/repos/{owner}/{repo}","#C9D1D9"]],annotations:[],themeName:"github-dark",style:{color:"#c9d1d9",background:"#0d1117",colorScheme:"dark"}}}),"\n",(0,r.jsx)(s.p,{children:"Uses upsert semantics. Only include the fields you want to override."}),"\n",(0,r.jsx)(i,{codeblock:{value:'{\n  "enabled": false,\n  "excludedTools": ["patch_k8s_resource", "update_github_file"],\n  "additiveRules": ["Do not restart pods without explicit user confirmation."]\n}',lang:"json",meta:"",code:'{\n  "enabled": false,\n  "excludedTools": ["patch_k8s_resource", "update_github_file"],\n  "additiveRules": ["Do not restart pods without explicit user confirmation."]\n}',tokens:[["{","#C9D1D9"],"\n  ",['"enabled"',"#7EE787"],[":","#C9D1D9"]," ",["false","#79C0FF"],[",","#C9D1D9"],"\n  ",['"excludedTools"',"#7EE787"],[": [","#C9D1D9"],['"patch_k8s_resource"',"#A5D6FF"],[",","#C9D1D9"]," ",['"update_github_file"',"#A5D6FF"],["],","#C9D1D9"],"\n  ",['"additiveRules"',"#7EE787"],[": [","#C9D1D9"],['"Do not restart pods without explicit user confirmation."',"#A5D6FF"],["]","#C9D1D9"],"\n",["}","#C9D1D9"]],annotations:[],themeName:"github-dark",style:{color:"#c9d1d9",background:"#0d1117",colorScheme:"dark"}}}),"\n",(0,r.jsxs)(s.p,{children:["Returns the saved override on success. Returns ",(0,r.jsx)(s.code,{children:"400"})," for validation failures."]}),"\n",(0,r.jsx)(s.p,{children:(0,r.jsx)(s.strong,{children:"Delete a repository override:"})}),"\n",(0,r.jsx)(i,{codeblock:{value:"DELETE /api/v2/ai/agent-config/repos/{owner}/{repo}",lang:"txt",meta:"",code:"DELETE /api/v2/ai/agent-config/repos/{owner}/{repo}",tokens:[["DELETE /api/v2/ai/agent-config/repos/{owner}/{repo}","#C9D1D9"]],annotations:[],themeName:"github-dark",style:{color:"#c9d1d9",background:"#0d1117",colorScheme:"dark"}}}),"\n",(0,r.jsx)(s.p,{children:"Soft-deletes the override. The repository reverts to global defaults."}),"\n",(0,r.jsx)(s.hr,{}),"\n",(0,r.jsx)(s.h2,{id:n[19].id,children:n[19].value}),"\n",(0,r.jsx)(s.h3,{id:n[20].id,children:n[20].value}),"\n",(0,r.jsx)(s.p,{children:"Configuration is cached at multiple layers. The API automatically invalidates caches on update, but if you changed the database directly, you may need to wait:"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"In-memory cache"})," — expires after 30 seconds"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Redis cache"})," — expires after 5 minutes"]}),"\n"]}),"\n",(0,r.jsxs)(s.p,{children:["Use the ",(0,r.jsx)(s.code,{children:"/effective"})," endpoint to confirm what the agent sees."]}),"\n",(0,r.jsx)(s.h3,{id:n[21].id,children:n[21].value}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.code,{children:"query_database"})," is required for agent operation. If you include it in ",(0,r.jsx)(s.code,{children:"excludedTools"}),", the API returns:"]}),"\n",(0,r.jsx)(i,{codeblock:{value:'Cannot exclude core tool: "query_database". Core tools are required for agent operation.',lang:"txt",meta:"",code:'Cannot exclude core tool: "query_database". Core tools are required for agent operation.',tokens:[['Cannot exclude core tool: "query_database". Core tools are required for agent operation.',"#C9D1D9"]],annotations:[],themeName:"github-dark",style:{color:"#c9d1d9",background:"#0d1117",colorScheme:"dark"}}}),"\n",(0,r.jsx)(s.p,{children:"Remove it from your exclusion list."}),"\n",(0,r.jsx)(s.h3,{id:n[22].id,children:n[22].value}),"\n",(0,r.jsxs)(s.p,{children:["Array fields use ",(0,r.jsx)(s.strong,{children:"additive merge"}),". If you removed a tool from a repository override but it’s still excluded, check the global config — the tool may be excluded there. Global exclusions cannot be overridden at the repo level."]}),"\n",(0,r.jsx)(s.h3,{id:n[23].id,children:n[23].value}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.code,{children:"systemPromptOverride"})," ",(0,r.jsx)(s.strong,{children:"completely replaces"})," the built-in prompt, including safety instructions and tool usage guidelines. If the agent behaves unexpectedly, try ",(0,r.jsx)(s.code,{children:"additiveRules"})," instead — it appends to the default prompt rather than replacing it."]})]})},"/docs/features/ai-agent-configuration",{filePath:"src/pages/docs/features/ai-agent-configuration.mdx",timestamp:1771187849e3,pageMap:d.O,frontMatter:{title:"AI Agent Configuration",tags:["ai","agent","configuration","admin","api"]},title:"AI Agent Configuration"},"undefined"==typeof RemoteContent?l:RemoteContent.useTOC)},71318:(e,n,s)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/docs/features/ai-agent-configuration",function(){return s(65806)}])},71807:(e,n,s)=>{"use strict";s.d(n,{e:()=>c});var r=s(37876),i=s(20181),d=s(27096);let t=(0,s(14232).createContext)({}),o=t.Provider;t.displayName="SSG";var l=s(1513);function c(e,n,s,r){let d=globalThis[i.VZ];return d.route=n,d.pageMap=s.pageMap,d.context[n]={Content:e,pageOpts:s,useTOC:r},a}function a({__nextra_pageMap:e=[],__nextra_dynamic_opts:n,...s}){let t=globalThis[i.VZ],{Layout:l,themeConfig:c}=t,{route:a,locale:x}=(0,d.r)(),u=t.context[a];if(!u)throw Error(`No content found for the "${a}" route. Please report it as a bug.`);let{pageOpts:j,useTOC:p,Content:g}=u;if(a.startsWith("/["))j.pageMap=e;else for(let{route:n,children:s}of e){let e=n.split("/").slice(x?2:1);(function e(n,[s,...r]){for(let i of n)if("children"in i&&s===i.name)return r.length?e(i.children,r):i})(j.pageMap,e).children=s}if(n){let{title:e,frontMatter:s}=n;j={...j,title:e,frontMatter:s}}return(0,r.jsx)(l,{themeConfig:c,pageOpts:j,pageProps:s,children:(0,r.jsx)(o,{value:s,children:(0,r.jsx)(h,{useTOC:p,children:(0,r.jsx)(g,{...s})})})})}function h({children:e,useTOC:n}){let{wrapper:s}=(0,l.R)();return(0,r.jsx)(x,{useTOC:n,wrapper:s,children:e})}function x({children:e,useTOC:n,wrapper:s,...i}){let d=n(i);return s?(0,r.jsx)(s,{toc:d,children:e}):e}}},e=>{var n=n=>e(e.s=n);e.O(0,[1781,636,6593,8792],()=>n(71318)),_N_E=e.O()}]);