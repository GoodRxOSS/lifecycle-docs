(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2498],{939:(e,n,r)=>{"use strict";r.r(n),r.d(n,{default:()=>l,useTOC:()=>d});var t=r(7876),s=r(1807),o=r(4674),i=r(1513);function d(e){let n={strong:"strong",...(0,i.R)()};return[{value:"Common Use Cases",id:"common-use-cases",depth:2},{value:"Webhook Configuration",id:"webhook-configuration",depth:2},{value:(0,t.jsx)(t.Fragment,{children:(0,t.jsx)(n.strong,{children:"Examples"})}),id:"examples",depth:3},{value:"Limitations",id:"limitations",depth:2}]}r(9471);let l=(0,s.e)(function(e){let{toc:n=d(e)}=e,r={code:"code",h2:"h2",h3:"h3",hr:"hr",li:"li",p:"p",strong:"strong",ul:"ul",...(0,i.R)(),...e.components},{Code:s}=r;return s||function(e,n){throw Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Code",!0),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(r.p,{children:["Lifecycle can invoke ",(0,t.jsx)(r.strong,{children:"third-party services"})," when a build state changes. Currently, only ",(0,t.jsx)(r.strong,{children:"Codefresh pipeline triggers"})," are supported. Webhooks allow users to automate external processes such as running tests or performing cleanup tasks based on environment build states."]}),"\n",(0,t.jsx)(r.h2,{id:n[0].id,children:n[0].value}),"\n",(0,t.jsxs)(r.ul,{children:["\n",(0,t.jsxs)(r.li,{children:["When a build status is ",(0,t.jsx)(r.code,{children:"deployed"}),", trigger ",(0,t.jsx)(r.strong,{children:"end-to-end tests"}),"."]}),"\n",(0,t.jsxs)(r.li,{children:["When a build status is ",(0,t.jsx)(r.code,{children:"error"}),", trigger ",(0,t.jsx)(r.strong,{children:"infrastructure cleanup"})," or alert the team."]}),"\n"]}),"\n",(0,t.jsx)(r.h2,{id:n[1].id,children:n[1].value}),"\n",(0,t.jsxs)(r.p,{children:["Webhooks are defined in the ",(0,t.jsx)(r.code,{children:"lifecycle.yaml"})," under the ",(0,t.jsx)(r.code,{children:"environment.webhooks"})," section."]}),"\n",(0,t.jsxs)(r.p,{children:["Below is an example configuration for triggering end-to-end tests when the ",(0,t.jsx)(r.code,{children:"deployed"})," state is reached."]}),"\n",(0,t.jsx)(r.h3,{id:n[2].id,children:n[2].value}),"\n",(0,t.jsx)(s,{codeblock:{value:'# Trigger End-to-End Tests on Deployment\nenvironment:\n  # ...\n  defaultServices:\n    - name: "frontend"\n  optionalServices:\n    - name: "backend"\n      repository: "lifecycle/backend"\n      branch: "main"\n  webhooks:\n    - state: deployed\n      type: codefresh\n      name: "End to End Tests"\n      pipelineId: 64598362453cc650c0c9cd4d\n      trigger: tests\n      env:\n        branch: "{{frontend_branchName}}"\n        TEST_URL: "https://{{frontend_publicUrl}}"\n  # ...',lang:"yaml",meta:"",code:'# Trigger End-to-End Tests on Deployment\nenvironment:\n  # ...\n  defaultServices:\n    - name: "frontend"\n  optionalServices:\n    - name: "backend"\n      repository: "lifecycle/backend"\n      branch: "main"\n  webhooks:\n    - state: deployed\n      type: codefresh\n      name: "End to End Tests"\n      pipelineId: 64598362453cc650c0c9cd4d\n      trigger: tests\n      env:\n        branch: "{{frontend_branchName}}"\n        TEST_URL: "https://{{frontend_publicUrl}}"\n  # ...',tokens:[["# Trigger End-to-End Tests on Deployment","#8B949E"],"\n",["environment","#7EE787"],[":","#C9D1D9"],"\n  ",["# ...","#8B949E"],"\n  ",["defaultServices","#7EE787"],[":","#C9D1D9"],"\n    ",["-","#C9D1D9"]," ",["name","#7EE787"],[":","#C9D1D9"]," ",['"frontend"',"#A5D6FF"],"\n  ",["optionalServices","#7EE787"],[":","#C9D1D9"],"\n    ",["-","#C9D1D9"]," ",["name","#7EE787"],[":","#C9D1D9"]," ",['"backend"',"#A5D6FF"],"\n      ",["repository","#7EE787"],[":","#C9D1D9"]," ",['"lifecycle/backend"',"#A5D6FF"],"\n      ",["branch","#7EE787"],[":","#C9D1D9"]," ",['"main"',"#A5D6FF"],"\n  ",["webhooks","#7EE787"],[":","#C9D1D9"],"\n    ",["-","#C9D1D9"]," ",["state","#7EE787"],[":","#C9D1D9"]," ",["deployed","#A5D6FF"],"\n      ",["type","#7EE787"],[":","#C9D1D9"]," ",["codefresh","#A5D6FF"],"\n      ",["name","#7EE787"],[":","#C9D1D9"]," ",['"End to End Tests"',"#A5D6FF"],"\n      ",["pipelineId","#7EE787"],[":","#C9D1D9"]," ",["64598362453cc650c0c9cd4d","#A5D6FF"],"\n      ",["trigger","#7EE787"],[":","#C9D1D9"]," ",["tests","#A5D6FF"],"\n      ",["env","#7EE787"],[":","#C9D1D9"],"\n        ",["branch","#7EE787"],[":","#C9D1D9"]," ",['"{{frontend_branchName}}"',"#A5D6FF"],"\n        ",["TEST_URL","#7EE787"],[":","#C9D1D9"]," ",['"https://{{frontend_publicUrl}}"',"#A5D6FF"],"\n  ",["# ...","#8B949E"]],annotations:[],themeName:"github-dark",style:{color:"#c9d1d9",background:"#0d1117",colorScheme:"dark"}}}),"\n",(0,t.jsxs)(r.ul,{children:["\n",(0,t.jsxs)(r.li,{children:[(0,t.jsx)(r.strong,{children:(0,t.jsx)(r.code,{children:"state: deployed"})})," → Triggers the webhook when the build reaches the ",(0,t.jsx)(r.code,{children:"deployed"})," state."]}),"\n",(0,t.jsxs)(r.li,{children:[(0,t.jsx)(r.strong,{children:(0,t.jsx)(r.code,{children:"type: codefresh"})})," → Specifies that this webhook triggers a ",(0,t.jsx)(r.strong,{children:"Codefresh pipeline"}),"."]}),"\n",(0,t.jsxs)(r.li,{children:[(0,t.jsx)(r.strong,{children:(0,t.jsx)(r.code,{children:"name"})})," → A human-readable name for the webhook."]}),"\n",(0,t.jsxs)(r.li,{children:[(0,t.jsx)(r.strong,{children:(0,t.jsx)(r.code,{children:"pipelineId"})})," → The unique Codefresh pipeline ID."]}),"\n",(0,t.jsxs)(r.li,{children:[(0,t.jsx)(r.strong,{children:(0,t.jsx)(r.code,{children:"trigger"})})," → Codefresh pipeline’s trigger to execute."]}),"\n",(0,t.jsxs)(r.li,{children:[(0,t.jsx)(r.strong,{children:(0,t.jsx)(r.code,{children:"env"})})," → Passes relevant environment variables (e.g., ",(0,t.jsx)(r.code,{children:"branch"})," and ",(0,t.jsx)(r.code,{children:"TEST_URL"}),")."]}),"\n"]}),"\n",(0,t.jsx)(r.hr,{}),"\n",(0,t.jsx)(s,{codeblock:{value:'# Trigger Cleanup on Build Error\nenvironment:\n  # ...\n  webhooks:\n    - state: error\n      type: codefresh\n      name: "Cleanup Failed Deployment"\n      pipelineId: 74283905723ff650c0d9ab7e\n      trigger: cleanup\n      env:\n        branch: "{{frontend_branchName}}"\n        CLEANUP_TARGET: "frontend"\n  # ...',lang:"yaml",meta:"",code:'# Trigger Cleanup on Build Error\nenvironment:\n  # ...\n  webhooks:\n    - state: error\n      type: codefresh\n      name: "Cleanup Failed Deployment"\n      pipelineId: 74283905723ff650c0d9ab7e\n      trigger: cleanup\n      env:\n        branch: "{{frontend_branchName}}"\n        CLEANUP_TARGET: "frontend"\n  # ...',tokens:[["# Trigger Cleanup on Build Error","#8B949E"],"\n",["environment","#7EE787"],[":","#C9D1D9"],"\n  ",["# ...","#8B949E"],"\n  ",["webhooks","#7EE787"],[":","#C9D1D9"],"\n    ",["-","#C9D1D9"]," ",["state","#7EE787"],[":","#C9D1D9"]," ",["error","#A5D6FF"],"\n      ",["type","#7EE787"],[":","#C9D1D9"]," ",["codefresh","#A5D6FF"],"\n      ",["name","#7EE787"],[":","#C9D1D9"]," ",['"Cleanup Failed Deployment"',"#A5D6FF"],"\n      ",["pipelineId","#7EE787"],[":","#C9D1D9"]," ",["74283905723ff650c0d9ab7e","#A5D6FF"],"\n      ",["trigger","#7EE787"],[":","#C9D1D9"]," ",["cleanup","#A5D6FF"],"\n      ",["env","#7EE787"],[":","#C9D1D9"],"\n        ",["branch","#7EE787"],[":","#C9D1D9"]," ",['"{{frontend_branchName}}"',"#A5D6FF"],"\n        ",["CLEANUP_TARGET","#7EE787"],[":","#C9D1D9"]," ",['"frontend"',"#A5D6FF"],"\n  ",["# ...","#8B949E"]],annotations:[],themeName:"github-dark",style:{color:"#c9d1d9",background:"#0d1117",colorScheme:"dark"}}}),"\n",(0,t.jsxs)(r.ul,{children:["\n",(0,t.jsxs)(r.li,{children:[(0,t.jsx)(r.strong,{children:(0,t.jsx)(r.code,{children:"state: error"})})," → Triggers the webhook when the build fails."]}),"\n",(0,t.jsxs)(r.li,{children:[(0,t.jsx)(r.strong,{children:(0,t.jsx)(r.code,{children:"type: codefresh"})})," → Invokes a Codefresh cleanup pipeline."]}),"\n",(0,t.jsxs)(r.li,{children:[(0,t.jsx)(r.strong,{children:(0,t.jsx)(r.code,{children:"trigger: cleanup"})})," → Codefresh pipeline’s trigger to execute."]}),"\n",(0,t.jsxs)(r.li,{children:[(0,t.jsx)(r.strong,{children:(0,t.jsx)(r.code,{children:"env"})})," → Includes necessary variables, such as ",(0,t.jsx)(r.code,{children:"branch"})," and ",(0,t.jsx)(r.code,{children:"CLEANUP_TARGET"}),"."]}),"\n"]}),"\n",(0,t.jsx)(r.h2,{id:n[3].id,children:n[3].value}),"\n",(0,t.jsxs)(r.ul,{children:["\n",(0,t.jsx)(r.li,{children:(0,t.jsx)(r.strong,{children:"Currently, Lifecycle only supports Codefresh pipeline triggers."})}),"\n",(0,t.jsxs)(r.li,{children:["In need of support for other webhook types? please ",(0,t.jsx)(r.strong,{children:"submit a pull request or an issue"}),"."]}),"\n"]}),"\n",(0,t.jsxs)(r.p,{children:["By leveraging webhooks, teams can ",(0,t.jsx)(r.strong,{children:"automate workflows, run tests, and clean up failed deployments"})," seamlessly within Lifecycle."]})]})},"/docs/features/webhooks",{filePath:"src/pages/docs/features/webhooks.mdx",timestamp:1750870873e3,pageMap:o.O,frontMatter:{title:"Webhooks",tags:["webhook","automation","codefresh","deployment","lifecycle"],date:"2025-02-16"},title:"Webhooks"},"undefined"==typeof RemoteContent?d:RemoteContent.useTOC)},1513:(e,n,r)=>{"use strict";r.d(n,{R:()=>l});var t=r(1668),s=r(4587),o=r.n(s),i=r(4232);let d={img:e=>(0,i.createElement)("object"==typeof e.src?o():"img",e)},l=e=>(0,t.R)({...d,...e})},1807:(e,n,r)=>{"use strict";r.d(n,{e:()=>c});var t=r(7876),s=r(181),o=r(7096);let i=(0,r(4232).createContext)({}),d=i.Provider;i.displayName="SSG";var l=r(1513);function c(e,n,r,t){let o=globalThis[s.VZ];return o.route=n,o.pageMap=r.pageMap,o.context[n]={Content:e,pageOpts:r,useTOC:t},a}function a({__nextra_pageMap:e=[],__nextra_dynamic_opts:n,...r}){let i=globalThis[s.VZ],{Layout:l,themeConfig:c}=i,{route:a,locale:p}=(0,o.r)(),u=i.context[a];if(!u)throw Error(`No content found for the "${a}" route. Please report it as a bug.`);let{pageOpts:g,useTOC:E,Content:f}=u;if(a.startsWith("/["))g.pageMap=e;else for(let{route:n,children:r}of e){let e=n.split("/").slice(p?2:1);(function e(n,[r,...t]){for(let s of n)if("children"in s&&r===s.name)return t.length?e(s.children,t):s})(g.pageMap,e).children=r}if(n){let{title:e,frontMatter:r}=n;g={...g,title:e,frontMatter:r}}return(0,t.jsx)(l,{themeConfig:c,pageOpts:g,pageProps:r,children:(0,t.jsx)(d,{value:r,children:(0,t.jsx)(h,{useTOC:E,children:(0,t.jsx)(f,{...r})})})})}function h({children:e,useTOC:n}){let{wrapper:r}=(0,l.R)();return(0,t.jsx)(p,{useTOC:n,wrapper:r,children:e})}function p({children:e,useTOC:n,wrapper:r,...s}){let o=n(s);return r?(0,t.jsx)(r,{toc:o,children:e}):e}},9888:(e,n,r)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/docs/features/webhooks",function(){return r(939)}])}},e=>{var n=n=>e(e.s=n);e.O(0,[4674,636,6593,8792],()=>n(9888)),_N_E=e.O()}]);