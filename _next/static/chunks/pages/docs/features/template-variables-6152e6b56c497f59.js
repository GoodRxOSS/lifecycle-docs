(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9590],{1513:(e,n,i)=>{"use strict";i.d(n,{R:()=>a});var l=i(1668),s=i(4587),r=i.n(s),t=i(4232);let c={img:e=>(0,t.createElement)("object"==typeof e.src?r():"img",e)},a=e=>(0,l.R)({...c,...e})},1807:(e,n,i)=>{"use strict";i.d(n,{e:()=>d});var l=i(7876),s=i(181),r=i(7096);let t=(0,i(4232).createContext)({}),c=t.Provider;t.displayName="SSG";var a=i(1513);function d(e,n,i,l){let r=globalThis[s.VZ];return r.route=n,r.pageMap=i.pageMap,r.context[n]={Content:e,pageOpts:i,useTOC:l},o}function o({__nextra_pageMap:e=[],__nextra_dynamic_opts:n,...i}){let t=globalThis[s.VZ],{Layout:a,themeConfig:d}=t,{route:o,locale:u}=(0,r.r)(),p=t.context[o];if(!p)throw Error(`No content found for the "${o}" route. Please report it as a bug.`);let{pageOpts:x,useTOC:j,Content:v}=p;if(o.startsWith("/["))x.pageMap=e;else for(let{route:n,children:i}of e){let e=n.split("/").slice(u?2:1);(function e(n,[i,...l]){for(let s of n)if("children"in s&&i===s.name)return l.length?e(s.children,l):s})(x.pageMap,e).children=i}if(n){let{title:e,frontMatter:i}=n;x={...x,title:e,frontMatter:i}}return(0,l.jsx)(a,{themeConfig:d,pageOpts:x,pageProps:i,children:(0,l.jsx)(c,{value:i,children:(0,l.jsx)(h,{useTOC:j,children:(0,l.jsx)(v,{...i})})})})}function h({children:e,useTOC:n}){let{wrapper:i}=(0,a.R)();return(0,l.jsx)(u,{useTOC:n,wrapper:i,children:e})}function u({children:e,useTOC:n,wrapper:i,...s}){let r=n(s);return i?(0,l.jsx)(i,{toc:r,children:e}):e}},7115:(e,n,i)=>{"use strict";i.r(n),i.d(n,{default:()=>d,useTOC:()=>a});var l=i(7876),s=i(1807),r=i(4674),t=i(1513),c=i(9941);function a(e){return[{value:"Overview",id:"overview",depth:2},{value:"Available Template Variables",id:"available-template-variables",depth:2},{value:"General Variables",id:"general-variables",depth:3},{value:"Service-Specific Variables",id:"service-specific-variables",depth:3},{value:"Usage Example",id:"usage-example",depth:2}]}let d=(0,s.e)(function(e){let{toc:n=a(e)}=e,i={a:"a",code:"code",h2:"h2",h3:"h3",li:"li",p:"p",strong:"strong",ul:"ul",...(0,t.R)(),...e.components},{Code:s}=i;return s||function(e,n){throw Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Code",!0),(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(i.h2,{id:n[0].id,children:n[0].value}),"\n",(0,l.jsxs)(i.p,{children:["Lifecycle uses ",(0,l.jsx)(i.a,{href:"https://github.com/janl/mustache.js",children:"Mustache"})," as the template rendering engine."]}),"\n",(0,l.jsx)(i.h2,{id:n[1].id,children:n[1].value}),"\n",(0,l.jsx)(i.p,{children:"The following template variables are available for use within your configuration. Variables related to specific services should use the service name as a prefix."}),"\n",(0,l.jsx)(i.h3,{id:n[2].id,children:n[2].value}),"\n",(0,l.jsxs)(i.ul,{children:["\n",(0,l.jsxs)(i.li,{children:[(0,l.jsx)(i.strong,{children:(0,l.jsx)(i.code,{children:"{{{ buildUUID }}}"})})," - The unique identifier for the Lifecycle environment, e.g., ",(0,l.jsx)(i.code,{children:"lively-down-881123"}),"."]}),"\n",(0,l.jsxs)(i.li,{children:[(0,l.jsx)(i.strong,{children:(0,l.jsx)(i.code,{children:"{{{ namespace }}}"})})," - Namespace for the deployments, e.g., ",(0,l.jsx)(i.code,{children:"env-lively-down-881123"}),"."]}),"\n",(0,l.jsxs)(i.li,{children:[(0,l.jsx)(i.strong,{children:(0,l.jsx)(i.code,{children:"{{{ pullRequestNumber }}}"})})," - The GitHub pull request number associated with the environment."]}),"\n"]}),"\n",(0,l.jsx)(i.h3,{id:n[3].id,children:n[3].value}),"\n",(0,l.jsxs)(i.p,{children:["For service-specific variables, replace ",(0,l.jsx)(i.code,{children:"<service_name>"})," with the actual service name."]}),"\n",(0,l.jsxs)(i.ul,{children:["\n",(0,l.jsxs)(i.li,{children:["\n",(0,l.jsxs)(i.p,{children:[(0,l.jsx)(i.strong,{children:(0,l.jsx)(i.code,{children:"{{{ <service_name>_internalHostname }}}"})})," - The internal hostname of the deployed service. If the service is optional and not deployed, it falls back to ",(0,l.jsx)(i.code,{children:"defaultInternalHostname"}),"."]}),"\n",(0,l.jsx)(c.P,{type:"info",children:(0,l.jsxs)(i.p,{children:[(0,l.jsx)(i.code,{children:"service_internalHostname"})," will be substituted with local cluster full\ndomain name like ",(0,l.jsx)(i.code,{children:"service.namespace.svc.cluster.local"})," to be able to work\nwith deployments across namespaces."]})}),"\n"]}),"\n",(0,l.jsxs)(i.li,{children:["\n",(0,l.jsxs)(i.p,{children:[(0,l.jsx)(i.strong,{children:(0,l.jsx)(i.code,{children:"{{{ <service_name>_publicUrl }}}"})})," - The public URL of the deployed service. If optional and not deployed, it defaults to ",(0,l.jsx)(i.code,{children:"defaultPublicUrl"})," under the ",(0,l.jsx)(i.code,{children:"services"})," table."]}),"\n"]}),"\n",(0,l.jsxs)(i.li,{children:["\n",(0,l.jsxs)(i.p,{children:[(0,l.jsx)(i.strong,{children:(0,l.jsx)(i.code,{children:"{{{ <service_name>_sha }}}"})})," - The GitHub SHA that triggered the Lifecycle build."]}),"\n"]}),"\n",(0,l.jsxs)(i.li,{children:["\n",(0,l.jsxs)(i.p,{children:[(0,l.jsx)(i.strong,{children:(0,l.jsx)(i.code,{children:"{{{ <service_name>_branchName }}}"})})," - The branch name of the pull request that deployed the environment."]}),"\n"]}),"\n",(0,l.jsxs)(i.li,{children:["\n",(0,l.jsxs)(i.p,{children:[(0,l.jsx)(i.strong,{children:(0,l.jsx)(i.code,{children:"{{{ <service_name>_UUID }}}"})})," - The build UUID of the service. If listed under ",(0,l.jsx)(i.code,{children:"optionalServices"})," or ",(0,l.jsx)(i.code,{children:"defaultServices"}),", its value depends on whether the service is selected:"]}),"\n",(0,l.jsxs)(i.ul,{children:["\n",(0,l.jsxs)(i.li,{children:["If selected, it is equal to ",(0,l.jsx)(i.code,{children:"buildUUID"}),"."]}),"\n",(0,l.jsxs)(i.li,{children:["If not selected (or if service not part of deploys created), it defaults to ",(0,l.jsx)(i.strong,{children:(0,l.jsx)(i.code,{children:"dev-0"})}),"."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(i.h2,{id:n[4].id,children:n[4].value}),"\n",(0,l.jsx)(s,{codeblock:{value:'services:\n  frontend:\n    # ...\n    env:\n      API_URL: "{{{ backend_publicUrl }}}"\n      UUID: "{{{ buildUUID }}}"',lang:"yaml",meta:"",code:'services:\n  frontend:\n    # ...\n    env:\n      API_URL: "{{{ backend_publicUrl }}}"\n      UUID: "{{{ buildUUID }}}"',tokens:[["services","#7EE787"],[":","#C9D1D9"],"\n  ",["frontend","#7EE787"],[":","#C9D1D9"],"\n    ",["# ...","#8B949E"],"\n    ",["env","#7EE787"],[":","#C9D1D9"],"\n      ",["API_URL","#7EE787"],[":","#C9D1D9"]," ",['"{{{ backend_publicUrl }}}"',"#A5D6FF"],"\n      ",["UUID","#7EE787"],[":","#C9D1D9"]," ",['"{{{ buildUUID }}}"',"#A5D6FF"]],annotations:[],themeName:"github-dark",style:{color:"#c9d1d9",background:"#0d1117",colorScheme:"dark"}}}),"\n",(0,l.jsxs)(i.p,{children:["This ensures the ",(0,l.jsx)(i.code,{children:"PUBLIC_URL"})," and ",(0,l.jsx)(i.code,{children:"INTERNAL_HOST"})," variables are dynamically assigned based on the ephemeral environment deployment."]}),"\n",(0,l.jsx)(c.P,{children:(0,l.jsxs)(i.ul,{children:["\n",(0,l.jsx)(i.li,{children:"Undefined variables will result in an empty string unless handled explicitly."}),"\n",(0,l.jsxs)(i.li,{children:["Use triple curly braces (",(0,l.jsx)(i.code,{children:"{{{ }}}"}),") to prevent unwanted HTML escaping."]}),"\n",(0,l.jsx)(i.li,{children:"Ensure service names are correctly referenced in the template."}),"\n"]})}),"\n",(0,l.jsxs)(i.p,{children:["For more details, refer to the ",(0,l.jsx)(i.a,{href:"https://github.com/janl/mustache.js",children:"Mustache.js documentation"}),"."]})]})},"/docs/features/template-variables",{filePath:"src/pages/docs/features/template-variables.mdx",timestamp:1749153776e3,pageMap:r.O,frontMatter:{title:"Template Variables",tags:["template","variables","buildUUID","publicUrl","sha","branchName","UUID","internalHostname","review"]},title:"Template Variables"},"undefined"==typeof RemoteContent?a:RemoteContent.useTOC)},9187:(e,n,i)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/docs/features/template-variables",function(){return i(7115)}])}},e=>{var n=n=>e(e.s=n);e.O(0,[4674,636,6593,8792],()=>n(9187)),_N_E=e.O()}]);