(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3147],{1513:(e,n,t)=>{"use strict";t.d(n,{R:()=>c});var r=t(1668),i=t(4587),s=t.n(i),l=t(4232);let o={img:e=>(0,l.createElement)("object"==typeof e.src?s():"img",e)},c=e=>(0,r.R)({...o,...e})},1807:(e,n,t)=>{"use strict";t.d(n,{e:()=>d});var r=t(7876),i=t(181),s=t(7096);let l=(0,t(4232).createContext)({}),o=l.Provider;l.displayName="SSG";var c=t(1513);function d(e,n,t,r){let s=globalThis[i.VZ];return s.route=n,s.pageMap=t.pageMap,s.context[n]={Content:e,pageOpts:t,useTOC:r},a}function a({__nextra_pageMap:e=[],__nextra_dynamic_opts:n,...t}){let l=globalThis[i.VZ],{Layout:c,themeConfig:d}=l,{route:a,locale:u}=(0,s.r)(),p=l.context[a];if(!p)throw Error(`No content found for the "${a}" route. Please report it as a bug.`);let{pageOpts:x,useTOC:v,Content:m}=p;if(a.startsWith("/["))x.pageMap=e;else for(let{route:n,children:t}of e){let e=n.split("/").slice(u?2:1);(function e(n,[t,...r]){for(let i of n)if("children"in i&&t===i.name)return r.length?e(i.children,r):i})(x.pageMap,e).children=t}if(n){let{title:e,frontMatter:t}=n;x={...x,title:e,frontMatter:t}}return(0,r.jsx)(c,{themeConfig:d,pageOpts:x,pageProps:t,children:(0,r.jsx)(o,{value:t,children:(0,r.jsx)(h,{useTOC:v,children:(0,r.jsx)(m,{...t})})})})}function h({children:e,useTOC:n}){let{wrapper:t}=(0,c.R)();return(0,r.jsx)(u,{useTOC:n,wrapper:t,children:e})}function u({children:e,useTOC:n,wrapper:t,...i}){let s=n(i);return t?(0,r.jsx)(t,{toc:s,children:e}):e}},2088:(e,n,t)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/docs/getting-started/explore-static-environment",function(){return t(2352)}])},2352:(e,n,t)=>{"use strict";t.r(n),t.d(n,{default:()=>d,useTOC:()=>c});var r=t(7876),i=t(1807),s=t(4674),l=t(1513),o=t(9941);function c(e){let n={code:"code",...(0,l.R)()};return[{value:(0,r.jsxs)(r.Fragment,{children:["What is ",(0,r.jsx)(n.code,{children:"dev-0"})]}),id:"what-is-dev-0",depth:2},{value:(0,r.jsxs)(r.Fragment,{children:["Create ",(0,r.jsx)(n.code,{children:"dev-0"})]}),id:"create-dev-0",depth:2},{value:"Key Features",id:"key-features",depth:2}]}let d=(0,i.e)(function(e){let{toc:n=c(e)}=e,t={a:"a",code:"code",h2:"h2",li:"li",p:"p",strong:"strong",ul:"ul",...(0,l.R)(),...e.components},{Code:i}=t;return i||function(e,n){throw Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Code",!0),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(t.p,{children:["A ",(0,r.jsx)(t.strong,{children:"static environment"})," in Lifecycle is a persistent environment that serves as a fallback when dependent services do not need to be rebuilt."]}),"\n",(0,r.jsx)(t.p,{children:"Unlike ephemeral environments that are built on short lived pull requests, static environments are built on top of long lived pull requests. These environments exist continuously and update automatically as changes are merged into the default branch of configured services."}),"\n",(0,r.jsx)(t.h2,{id:n[0].id,children:n[0].value}),"\n",(0,r.jsxs)(t.p,{children:["The ",(0,r.jsx)(t.strong,{children:"default static environment"})," is ",(0,r.jsx)(t.code,{children:"dev-0"}),". This environment ensures that there is always a ",(0,r.jsx)(t.strong,{children:"stable and up-to-date version"})," of services available without needing to build every dependency manually."]}),"\n",(0,r.jsxs)(o.P,{type:"warning",children:[(0,r.jsxs)(t.p,{children:["The ",(0,r.jsx)(t.code,{children:"dev-0"})," environment should be created for your installation."]}),(0,r.jsxs)(t.p,{children:["During the initial bootstrapping of Lifecycle, the ",(0,r.jsx)(t.code,{children:"dev-0"})," build record is created automatically but this itself does not have any services built."]})]}),"\n",(0,r.jsx)(t.h2,{id:n[1].id,children:n[1].value}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsxs)(t.li,{children:["Delete the dummy ",(0,r.jsx)(t.code,{children:"dev-0"})," build record from ",(0,r.jsx)(t.code,{children:"builds"})," table in the database"]}),"\n"]}),"\n",(0,r.jsx)(i,{codeblock:{value:"DELETE FROM builds WHERE uuid = 'dev-0';",lang:"sql",meta:"",code:"DELETE FROM builds WHERE uuid = 'dev-0';",tokens:[["DELETE FROM","#FF7B72"]," ",["builds","#C9D1D9"]," ",["WHERE","#FF7B72"]," ",["uuid","#C9D1D9"]," ",["=","#FF7B72"]," ",["'dev-0'","#A5D6FF"],[";","#C9D1D9"]],annotations:[],themeName:"github-dark",style:{color:"#c9d1d9",background:"#0d1117",colorScheme:"dark"}}}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsxs)(t.li,{children:["\n",(0,r.jsxs)(t.p,{children:["Create a repository named ",(0,r.jsx)(t.code,{children:"lifecycle-static-env"})," in your GitHub account"]}),"\n"]}),"\n",(0,r.jsxs)(t.li,{children:["\n",(0,r.jsx)(t.p,{children:"Install the Lifecycle GitHub App in this repository"}),"\n"]}),"\n",(0,r.jsxs)(t.li,{children:["\n",(0,r.jsxs)(t.p,{children:["Create a pull request in this repository with branch ",(0,r.jsx)(t.code,{children:"dev-0"})]}),"\n"]}),"\n",(0,r.jsxs)(t.li,{children:["\n",(0,r.jsxs)(t.p,{children:["Add ",(0,r.jsx)(t.code,{children:"lifecycle.yaml"})," file to the root of the repository with all the services you want to include in the ",(0,r.jsx)(t.code,{children:"dev-0"})," environment"]}),"\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.strong,{children:"Example:"})}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(i,{codeblock:{value:'environment:\n  defaultServices:\n    - name: "frontend"\n      repository: "account/frontend-repo"\n      branch: "main"\n    - name: "grpc"\n      repository: "account/backend-grpc"\n      branch: "main"',lang:"yaml",meta:"",code:'environment:\n  defaultServices:\n    - name: "frontend"\n      repository: "account/frontend-repo"\n      branch: "main"\n    - name: "grpc"\n      repository: "account/backend-grpc"\n      branch: "main"',tokens:[["environment","#7EE787"],[":","#C9D1D9"],"\n  ",["defaultServices","#7EE787"],[":","#C9D1D9"],"\n    ",["-","#C9D1D9"]," ",["name","#7EE787"],[":","#C9D1D9"]," ",['"frontend"',"#A5D6FF"],"\n      ",["repository","#7EE787"],[":","#C9D1D9"]," ",['"account/frontend-repo"',"#A5D6FF"],"\n      ",["branch","#7EE787"],[":","#C9D1D9"]," ",['"main"',"#A5D6FF"],"\n    ",["-","#C9D1D9"]," ",["name","#7EE787"],[":","#C9D1D9"]," ",['"grpc"',"#A5D6FF"],"\n      ",["repository","#7EE787"],[":","#C9D1D9"]," ",['"account/backend-grpc"',"#A5D6FF"],"\n      ",["branch","#7EE787"],[":","#C9D1D9"]," ",['"main"',"#A5D6FF"]],annotations:[],themeName:"github-dark",style:{color:"#c9d1d9",background:"#0d1117",colorScheme:"dark"}}}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsxs)(t.li,{children:["Deploy the ",(0,r.jsx)(t.code,{children:"dev-0"})," environment by adding ",(0,r.jsx)(t.code,{children:"lifecycle-deploy!"})," label to the pull request"]}),"\n",(0,r.jsxs)(t.li,{children:["Update ",(0,r.jsx)(t.code,{children:"uuid"})," for the environment to ",(0,r.jsx)(t.code,{children:"dev-0"})," in the ",(0,r.jsx)(t.a,{href:"/docs/tips/using-mission-control#override-uuid",children:"mission control comment"})]}),"\n",(0,r.jsxs)(t.li,{children:["Finally, execute this query to track default branches of the services in the ",(0,r.jsx)(t.code,{children:"dev-0"})," environment:"]}),"\n"]}),"\n",(0,r.jsx)(i,{codeblock:{value:'UPDATE builds\nSET\n    "trackDefaultBranches" = true,\n    "isStatic" = true\nWHERE\n    uuid = \'dev-0\';',lang:"sql",meta:"",code:'UPDATE builds\nSET\n    "trackDefaultBranches" = true,\n    "isStatic" = true\nWHERE\n    uuid = \'dev-0\';',tokens:[["UPDATE","#FF7B72"]," ",["builds","#C9D1D9"],"\n",["SET","#FF7B72"],"\n    ",['"trackDefaultBranches"',"#A5D6FF"]," ",["=","#FF7B72"]," ",["true,","#C9D1D9"],"\n    ",['"isStatic"',"#A5D6FF"]," ",["=","#FF7B72"]," ",["true","#C9D1D9"],"\n",["WHERE","#FF7B72"],"\n    ",["uuid","#C9D1D9"]," ",["=","#FF7B72"]," ",["'dev-0'","#A5D6FF"],[";","#C9D1D9"]],annotations:[],themeName:"github-dark",style:{color:"#c9d1d9",background:"#0d1117",colorScheme:"dark"}}}),"\n",(0,r.jsx)(t.h2,{id:n[2].id,children:n[2].value}),"\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.strong,{children:"\uD83C\uDFD7️ Fallback for Optional Services"})}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsxs)(t.li,{children:["When optional services are not explicitly built in an ephemeral environment, Lifecycle defaults to using the latest build from ",(0,r.jsx)(t.code,{children:"dev-0"}),"."]}),"\n"]}),"\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.strong,{children:"\uD83D\uDCAA Based on a Persistent PR"})}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsxs)(t.li,{children:["Similar to ephemeral environments, ",(0,r.jsx)(t.code,{children:"dev-0"})," is based on a PR, but it remains open and continuously updates."]}),"\n"]}),"\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.strong,{children:"\uD83D\uDC63 Tracks Changes on Default Branch Merges"})}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsxs)(t.li,{children:["Whenever a service has a new change merged to its ",(0,r.jsx)(t.code,{children:"main"})," branch, ",(0,r.jsx)(t.code,{children:"dev-0"})," will ",(0,r.jsx)(t.strong,{children:"automatically pull, build, and redeploy"})," the latest changes."]}),"\n",(0,r.jsxs)(t.li,{children:["This ensures ",(0,r.jsx)(t.code,{children:"dev-0"})," always contains ",(0,r.jsx)(t.strong,{children:"the freshest version"})," of all services."]}),"\n"]})]})},"/docs/getting-started/explore-static-environment",{filePath:"src/pages/docs/getting-started/explore-static-environment.mdx",timestamp:174916694e4,pageMap:s.O,frontMatter:{title:"Explore static environment",description:"Create the first and default static environment",tags:["tutorial","dev-0","static","onboard"]},title:"Explore static environment"},"undefined"==typeof RemoteContent?c:RemoteContent.useTOC)}},e=>{var n=n=>e(e.s=n);e.O(0,[4674,636,6593,8792],()=>n(2088)),_N_E=e.O()}]);