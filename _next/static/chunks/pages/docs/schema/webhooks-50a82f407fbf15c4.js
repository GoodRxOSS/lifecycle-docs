(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8142],{1513:(e,n,t)=>{"use strict";t.d(n,{R:()=>o});var d=t(1668),s=t(4587),r=t.n(s),i=t(4232);let c={img:e=>(0,i.createElement)("object"==typeof e.src?r():"img",e)},o=e=>(0,d.R)({...c,...e})},1807:(e,n,t)=>{"use strict";t.d(n,{e:()=>l});var d=t(7876),s=t(181),r=t(7096);let i=(0,t(4232).createContext)({}),c=i.Provider;i.displayName="SSG";var o=t(1513);function l(e,n,t,d){let r=globalThis[s.VZ];return r.route=n,r.pageMap=t.pageMap,r.context[n]={Content:e,pageOpts:t,useTOC:d},h}function h({__nextra_pageMap:e=[],__nextra_dynamic_opts:n,...t}){let i=globalThis[s.VZ],{Layout:o,themeConfig:l}=i,{route:h,locale:x}=(0,r.r)(),j=i.context[h];if(!j)throw Error(`No content found for the "${h}" route. Please report it as a bug.`);let{pageOpts:p,useTOC:m,Content:u}=j;if(h.startsWith("/["))p.pageMap=e;else for(let{route:n,children:t}of e){let e=n.split("/").slice(x?2:1);(function e(n,[t,...d]){for(let s of n)if("children"in s&&t===s.name)return d.length?e(s.children,d):s})(p.pageMap,e).children=t}if(n){let{title:e,frontMatter:t}=n;p={...p,title:e,frontMatter:t}}return(0,d.jsx)(o,{themeConfig:l,pageOpts:p,pageProps:t,children:(0,d.jsx)(c,{value:t,children:(0,d.jsx)(a,{useTOC:m,children:(0,d.jsx)(u,{...t})})})})}function a({children:e,useTOC:n}){let{wrapper:t}=(0,o.R)();return(0,d.jsx)(x,{useTOC:n,wrapper:t,children:e})}function x({children:e,useTOC:n,wrapper:t,...s}){let r=n(s);return t?(0,d.jsx)(t,{toc:r,children:e}):e}},1819:(e,n,t)=>{"use strict";t.r(n),t.d(n,{default:()=>l,useTOC:()=>o});var d=t(7876),s=t(1807),r=t(1781),i=t(1513),c=t(9941);function o(e){return[{value:"Common Fields",id:"common-fields",depth:2},{value:"Trigger States",id:"trigger-states",depth:2},{value:"Webhook Types",id:"webhook-types",depth:2},{value:"codefresh",id:"codefresh",depth:3},{value:"docker",id:"docker",depth:3},{value:"command",id:"command",depth:3},{value:"Template Variables",id:"template-variables",depth:2}]}let l=(0,s.e)(function(e){let{toc:n=o(e)}=e,t={a:"a",code:"code",h2:"h2",h3:"h3",p:"p",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,i.R)(),...e.components},{Code:s}=t;return s||function(e,n){throw Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Code",!0),(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)(t.p,{children:["Webhooks allow you to trigger automated actions when an environment reaches certain states. They are configured under ",(0,d.jsx)(t.code,{children:"environment.webhooks"})," in your ",(0,d.jsx)(t.code,{children:"lifecycle.yaml"}),"."]}),"\n",(0,d.jsx)(c.P,{type:"info",children:(0,d.jsxs)(t.p,{children:["For detailed use cases, examples, and execution behavior, see the\n",(0,d.jsx)(t.a,{href:"/docs/features/webhooks",children:"Webhooks"})," guide."]})}),"\n",(0,d.jsx)(t.h2,{id:n[0].id,children:n[0].value}),"\n",(0,d.jsx)(t.p,{children:"All webhook types share these common fields:"}),"\n",(0,d.jsxs)(t.table,{children:[(0,d.jsx)(t.thead,{children:(0,d.jsxs)(t.tr,{children:[(0,d.jsx)(t.th,{children:"Field"}),(0,d.jsx)(t.th,{children:"Type"}),(0,d.jsx)(t.th,{children:"Required"}),(0,d.jsx)(t.th,{children:"Description"})]})}),(0,d.jsxs)(t.tbody,{children:[(0,d.jsxs)(t.tr,{children:[(0,d.jsx)(t.td,{children:(0,d.jsx)(t.code,{children:"name"})}),(0,d.jsx)(t.td,{children:"string"}),(0,d.jsx)(t.td,{children:"No"}),(0,d.jsx)(t.td,{children:"Human-readable name for the webhook"})]}),(0,d.jsxs)(t.tr,{children:[(0,d.jsx)(t.td,{children:(0,d.jsx)(t.code,{children:"description"})}),(0,d.jsx)(t.td,{children:"string"}),(0,d.jsx)(t.td,{children:"No"}),(0,d.jsx)(t.td,{children:"Description of what the webhook does"})]}),(0,d.jsxs)(t.tr,{children:[(0,d.jsx)(t.td,{children:(0,d.jsx)(t.code,{children:"state"})}),(0,d.jsx)(t.td,{children:"string"}),(0,d.jsx)(t.td,{children:(0,d.jsx)(t.strong,{children:"Yes"})}),(0,d.jsxs)(t.td,{children:["Trigger state: ",(0,d.jsx)(t.code,{children:"deployed"}),", ",(0,d.jsx)(t.code,{children:"error"}),", or ",(0,d.jsx)(t.code,{children:"torn_down"})]})]}),(0,d.jsxs)(t.tr,{children:[(0,d.jsx)(t.td,{children:(0,d.jsx)(t.code,{children:"type"})}),(0,d.jsx)(t.td,{children:"string"}),(0,d.jsx)(t.td,{children:(0,d.jsx)(t.strong,{children:"Yes"})}),(0,d.jsxs)(t.td,{children:["Webhook type: ",(0,d.jsx)(t.code,{children:"codefresh"}),", ",(0,d.jsx)(t.code,{children:"docker"}),", or ",(0,d.jsx)(t.code,{children:"command"})]})]}),(0,d.jsxs)(t.tr,{children:[(0,d.jsx)(t.td,{children:(0,d.jsx)(t.code,{children:"env"})}),(0,d.jsx)(t.td,{children:"object"}),(0,d.jsx)(t.td,{children:(0,d.jsx)(t.strong,{children:"Yes"})}),(0,d.jsx)(t.td,{children:"Environment variables passed to the webhook"})]})]})]}),"\n",(0,d.jsx)(t.h2,{id:n[1].id,children:n[1].value}),"\n",(0,d.jsxs)(t.table,{children:[(0,d.jsx)(t.thead,{children:(0,d.jsxs)(t.tr,{children:[(0,d.jsx)(t.th,{children:"State"}),(0,d.jsx)(t.th,{children:"Description"})]})}),(0,d.jsxs)(t.tbody,{children:[(0,d.jsxs)(t.tr,{children:[(0,d.jsx)(t.td,{children:(0,d.jsx)(t.code,{children:"deployed"})}),(0,d.jsx)(t.td,{children:"All services successfully deployed and running"})]}),(0,d.jsxs)(t.tr,{children:[(0,d.jsx)(t.td,{children:(0,d.jsx)(t.code,{children:"error"})}),(0,d.jsx)(t.td,{children:"Build or deployment failed"})]}),(0,d.jsxs)(t.tr,{children:[(0,d.jsx)(t.td,{children:(0,d.jsx)(t.code,{children:"torn_down"})}),(0,d.jsx)(t.td,{children:"Environment has been destroyed"})]})]})]}),"\n",(0,d.jsx)(t.h2,{id:n[2].id,children:n[2].value}),"\n",(0,d.jsx)(t.h3,{id:n[3].id,children:n[3].value}),"\n",(0,d.jsx)(t.p,{children:"Triggers an existing Codefresh pipeline."}),"\n",(0,d.jsxs)(t.table,{children:[(0,d.jsx)(t.thead,{children:(0,d.jsxs)(t.tr,{children:[(0,d.jsx)(t.th,{children:"Field"}),(0,d.jsx)(t.th,{children:"Type"}),(0,d.jsx)(t.th,{children:"Required"}),(0,d.jsx)(t.th,{children:"Description"})]})}),(0,d.jsxs)(t.tbody,{children:[(0,d.jsxs)(t.tr,{children:[(0,d.jsx)(t.td,{children:(0,d.jsx)(t.code,{children:"pipelineId"})}),(0,d.jsx)(t.td,{children:"string"}),(0,d.jsx)(t.td,{children:"Yes"}),(0,d.jsx)(t.td,{children:"Codefresh pipeline ID"})]}),(0,d.jsxs)(t.tr,{children:[(0,d.jsx)(t.td,{children:(0,d.jsx)(t.code,{children:"trigger"})}),(0,d.jsx)(t.td,{children:"string"}),(0,d.jsx)(t.td,{children:"No"}),(0,d.jsx)(t.td,{children:"Pipeline trigger name"})]})]})]}),"\n",(0,d.jsx)(s,{codeblock:{value:'environment:\n  webhooks:\n    - name: "Run E2E Tests"\n      state: deployed\n      type: codefresh\n      pipelineId: "64598362453cc650c0c9cd4d"\n      trigger: "tests"\n      env:\n        BRANCH: "{{api_branchName}}"',lang:"yaml",meta:'filename="lifecycle.yaml"',code:'environment:\n  webhooks:\n    - name: "Run E2E Tests"\n      state: deployed\n      type: codefresh\n      pipelineId: "64598362453cc650c0c9cd4d"\n      trigger: "tests"\n      env:\n        BRANCH: "{{api_branchName}}"',tokens:[["environment","#7EE787"],[":","#C9D1D9"],"\n  ",["webhooks","#7EE787"],[":","#C9D1D9"],"\n    ",["-","#C9D1D9"]," ",["name","#7EE787"],[":","#C9D1D9"]," ",['"Run E2E Tests"',"#A5D6FF"],"\n      ",["state","#7EE787"],[":","#C9D1D9"]," ",["deployed","#A5D6FF"],"\n      ",["type","#7EE787"],[":","#C9D1D9"]," ",["codefresh","#A5D6FF"],"\n      ",["pipelineId","#7EE787"],[":","#C9D1D9"]," ",['"64598362453cc650c0c9cd4d"',"#A5D6FF"],"\n      ",["trigger","#7EE787"],[":","#C9D1D9"]," ",['"tests"',"#A5D6FF"],"\n      ",["env","#7EE787"],[":","#C9D1D9"],"\n        ",["BRANCH","#7EE787"],[":","#C9D1D9"]," ",['"{{api_branchName}}"',"#A5D6FF"]],annotations:[],themeName:"github-dark",style:{color:"#c9d1d9",background:"#0d1117",colorScheme:"dark"}}}),"\n",(0,d.jsx)(t.h3,{id:n[4].id,children:n[4].value}),"\n",(0,d.jsx)(t.p,{children:"Runs a Docker image as a Kubernetes job."}),"\n",(0,d.jsxs)(t.table,{children:[(0,d.jsx)(t.thead,{children:(0,d.jsxs)(t.tr,{children:[(0,d.jsx)(t.th,{children:"Field"}),(0,d.jsx)(t.th,{children:"Type"}),(0,d.jsx)(t.th,{children:"Required"}),(0,d.jsx)(t.th,{children:"Description"})]})}),(0,d.jsxs)(t.tbody,{children:[(0,d.jsxs)(t.tr,{children:[(0,d.jsx)(t.td,{children:(0,d.jsx)(t.code,{children:"docker.image"})}),(0,d.jsx)(t.td,{children:"string"}),(0,d.jsx)(t.td,{children:(0,d.jsx)(t.strong,{children:"Yes"})}),(0,d.jsx)(t.td,{children:"Docker image to execute"})]}),(0,d.jsxs)(t.tr,{children:[(0,d.jsx)(t.td,{children:(0,d.jsx)(t.code,{children:"docker.command"})}),(0,d.jsx)(t.td,{children:"array"}),(0,d.jsx)(t.td,{children:"No"}),(0,d.jsx)(t.td,{children:"Override entrypoint command"})]}),(0,d.jsxs)(t.tr,{children:[(0,d.jsx)(t.td,{children:(0,d.jsx)(t.code,{children:"docker.args"})}),(0,d.jsx)(t.td,{children:"array"}),(0,d.jsx)(t.td,{children:"No"}),(0,d.jsx)(t.td,{children:"Arguments to pass to the command"})]}),(0,d.jsxs)(t.tr,{children:[(0,d.jsx)(t.td,{children:(0,d.jsx)(t.code,{children:"docker.timeout"})}),(0,d.jsx)(t.td,{children:"number"}),(0,d.jsx)(t.td,{children:"No"}),(0,d.jsx)(t.td,{children:"Max execution time in seconds (default: 1800)"})]})]})]}),"\n",(0,d.jsx)(s,{codeblock:{value:'environment:\n  webhooks:\n    - name: "Integration Tests"\n      state: deployed\n      type: docker\n      docker:\n        image: "myorg/integration-tests:latest"\n        command: ["npm", "run", "test"]\n        timeout: 3600\n      env:\n        API_URL: "https://{{api_publicUrl}}"',lang:"yaml",meta:'filename="lifecycle.yaml"',code:'environment:\n  webhooks:\n    - name: "Integration Tests"\n      state: deployed\n      type: docker\n      docker:\n        image: "myorg/integration-tests:latest"\n        command: ["npm", "run", "test"]\n        timeout: 3600\n      env:\n        API_URL: "https://{{api_publicUrl}}"',tokens:[["environment","#7EE787"],[":","#C9D1D9"],"\n  ",["webhooks","#7EE787"],[":","#C9D1D9"],"\n    ",["-","#C9D1D9"]," ",["name","#7EE787"],[":","#C9D1D9"]," ",['"Integration Tests"',"#A5D6FF"],"\n      ",["state","#7EE787"],[":","#C9D1D9"]," ",["deployed","#A5D6FF"],"\n      ",["type","#7EE787"],[":","#C9D1D9"]," ",["docker","#A5D6FF"],"\n      ",["docker","#7EE787"],[":","#C9D1D9"],"\n        ",["image","#7EE787"],[":","#C9D1D9"]," ",['"myorg/integration-tests:latest"',"#A5D6FF"],"\n        ",["command","#7EE787"],[": [","#C9D1D9"],['"npm"',"#A5D6FF"],[",","#C9D1D9"]," ",['"run"',"#A5D6FF"],[",","#C9D1D9"]," ",['"test"',"#A5D6FF"],["]","#C9D1D9"],"\n        ",["timeout","#7EE787"],[":","#C9D1D9"]," ",["3600","#79C0FF"],"\n      ",["env","#7EE787"],[":","#C9D1D9"],"\n        ",["API_URL","#7EE787"],[":","#C9D1D9"]," ",['"https://{{api_publicUrl}}"',"#A5D6FF"]],annotations:[],themeName:"github-dark",style:{color:"#c9d1d9",background:"#0d1117",colorScheme:"dark"}}}),"\n",(0,d.jsx)(t.h3,{id:n[5].id,children:n[5].value}),"\n",(0,d.jsx)(t.p,{children:"Runs a shell script in a specified Docker image."}),"\n",(0,d.jsxs)(t.table,{children:[(0,d.jsx)(t.thead,{children:(0,d.jsxs)(t.tr,{children:[(0,d.jsx)(t.th,{children:"Field"}),(0,d.jsx)(t.th,{children:"Type"}),(0,d.jsx)(t.th,{children:"Required"}),(0,d.jsx)(t.th,{children:"Description"})]})}),(0,d.jsxs)(t.tbody,{children:[(0,d.jsxs)(t.tr,{children:[(0,d.jsx)(t.td,{children:(0,d.jsx)(t.code,{children:"command.image"})}),(0,d.jsx)(t.td,{children:"string"}),(0,d.jsx)(t.td,{children:(0,d.jsx)(t.strong,{children:"Yes"})}),(0,d.jsx)(t.td,{children:"Docker image to run the script in"})]}),(0,d.jsxs)(t.tr,{children:[(0,d.jsx)(t.td,{children:(0,d.jsx)(t.code,{children:"command.script"})}),(0,d.jsx)(t.td,{children:"string"}),(0,d.jsx)(t.td,{children:(0,d.jsx)(t.strong,{children:"Yes"})}),(0,d.jsx)(t.td,{children:"Shell script to execute"})]}),(0,d.jsxs)(t.tr,{children:[(0,d.jsx)(t.td,{children:(0,d.jsx)(t.code,{children:"command.timeout"})}),(0,d.jsx)(t.td,{children:"number"}),(0,d.jsx)(t.td,{children:"No"}),(0,d.jsx)(t.td,{children:"Max execution time in seconds (default: 1800)"})]})]})]}),"\n",(0,d.jsx)(s,{codeblock:{value:'environment:\n  webhooks:\n    - name: "Slack Notification"\n      state: deployed\n      type: command\n      command:\n        image: "alpine:latest"\n        script: |\n          apk add --no-cache curl\n          curl -X POST "$SLACK_WEBHOOK" \\\n            -H "Content-Type: application/json" \\\n            -d \'{"text":"Deployed to $URL"}\'\n      env:\n        SLACK_WEBHOOK: "https://hooks.slack.com/services/XXX"\n        URL: "https://{{api_publicUrl}}"',lang:"yaml",meta:'filename="lifecycle.yaml"',code:'environment:\n  webhooks:\n    - name: "Slack Notification"\n      state: deployed\n      type: command\n      command:\n        image: "alpine:latest"\n        script: |\n          apk add --no-cache curl\n          curl -X POST "$SLACK_WEBHOOK" \\\n            -H "Content-Type: application/json" \\\n            -d \'{"text":"Deployed to $URL"}\'\n      env:\n        SLACK_WEBHOOK: "https://hooks.slack.com/services/XXX"\n        URL: "https://{{api_publicUrl}}"',tokens:[["environment","#7EE787"],[":","#C9D1D9"],"\n  ",["webhooks","#7EE787"],[":","#C9D1D9"],"\n    ",["-","#C9D1D9"]," ",["name","#7EE787"],[":","#C9D1D9"]," ",['"Slack Notification"',"#A5D6FF"],"\n      ",["state","#7EE787"],[":","#C9D1D9"]," ",["deployed","#A5D6FF"],"\n      ",["type","#7EE787"],[":","#C9D1D9"]," ",["command","#A5D6FF"],"\n      ",["command","#7EE787"],[":","#C9D1D9"],"\n        ",["image","#7EE787"],[":","#C9D1D9"]," ",['"alpine:latest"',"#A5D6FF"],"\n        ",["script","#7EE787"],[":","#C9D1D9"]," ",["|","#FF7B72"],"\n          ",["apk add --no-cache curl","#A5D6FF"],"\n          ",['curl -X POST "$SLACK_WEBHOOK" \\',"#A5D6FF"],"\n            ",['-H "Content-Type: application/json" \\',"#A5D6FF"],"\n            ",['-d \'{"text":"Deployed to $URL"}\'',"#A5D6FF"],"\n      ",["env","#7EE787"],[":","#C9D1D9"],"\n        ",["SLACK_WEBHOOK","#7EE787"],[":","#C9D1D9"]," ",['"https://hooks.slack.com/services/XXX"',"#A5D6FF"],"\n        ",["URL","#7EE787"],[":","#C9D1D9"]," ",['"https://{{api_publicUrl}}"',"#A5D6FF"]],annotations:[],themeName:"github-dark",style:{color:"#c9d1d9",background:"#0d1117",colorScheme:"dark"}}}),"\n",(0,d.jsx)(t.h2,{id:n[6].id,children:n[6].value}),"\n",(0,d.jsxs)(t.p,{children:["You can use template variables like ",(0,d.jsx)(t.code,{children:"{{api_publicUrl}}"})," in the ",(0,d.jsx)(t.code,{children:"env"})," section to reference dynamic values from your services."]}),"\n",(0,d.jsxs)(t.p,{children:["See the ",(0,d.jsx)(t.a,{href:"/docs/features/template-variables",children:"Template Variables"})," guide for the complete list of available variables."]})]})},"/docs/schema/webhooks",{filePath:"src/pages/docs/schema/webhooks.mdx",timestamp:1768715881e3,pageMap:r.O,frontMatter:{title:"Webhooks Configuration",description:"Schema reference for configuring webhooks to automate actions on deployment events",tags:["schema","webhooks","automation","codefresh","docker"]},title:"Webhooks Configuration"},"undefined"==typeof RemoteContent?o:RemoteContent.useTOC)},3644:(e,n,t)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/docs/schema/webhooks",function(){return t(1819)}])}},e=>{var n=n=>e(e.s=n);e.O(0,[1781,636,6593,8792],()=>n(3644)),_N_E=e.O()}]);