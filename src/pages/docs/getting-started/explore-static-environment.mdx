---
title: Explore static environment
description: Create the first and default static environment
tags:
  - tutorial
  - dev-0
  - static
  - onboard
---

import { Callout } from "nextra/components";
import { Mermaid } from "@lifecycle-docs/components";

## Quick Reference

| Property       | Value                                            |
| -------------- | ------------------------------------------------ |
| Default UUID   | `dev-0`                                          |
| Repository     | `lifecycle-static-env`                           |
| Config file    | `lifecycle.yaml` (root)                          |
| Deploy label   | `lifecycle-deploy!`                              |
| Database flags | `trackDefaultBranches = true`, `isStatic = true` |

## What is a Static Environment?

A **static environment** is a persistent, long-lived environment that auto-updates when changes merge to default branches. It serves as the fallback for services not explicitly built in ephemeral environments.

<Mermaid
  chart={`
flowchart TB
    subgraph ephemeral["Ephemeral Environment"]
        frontend["frontend"]
        backend["backend"]
        note1["(explicitly built)"]
    end
    subgraph static["dev-0 (Static Fallback)"]
        grpc["grpc"]
        database["database"]
        cache["cache"]
        other["other services"]
    end
    frontend --> static
    backend --> static
`}
/>

<Callout type="warning">
  The `dev-0` environment must be created manually. The bootstrap process
  creates the record but does not build any services.
</Callout>

## Static vs Ephemeral

| Aspect   | Static                | Ephemeral         |
| -------- | --------------------- | ----------------- |
| Lifespan | Persistent            | PR lifecycle      |
| Updates  | Auto on merge to main | Manual/PR updates |
| Cleanup  | Manual only           | Auto on PR close  |
| Example  | `dev-0`               | `feature-123`     |

## Create `dev-0`

### Step 1: Delete Bootstrap Record

```sql
DELETE FROM builds WHERE uuid = 'dev-0';
```

### Step 2: Create Repository

Create `lifecycle-static-env` repository in your GitHub account.

### Step 3: Install GitHub App

Install the Lifecycle GitHub App on the new repository.

### Step 4: Add Configuration

Create a PR from branch `dev-0` with `lifecycle.yaml`:

```yaml filename="lifecycle.yaml"
environment:
  defaultServices:
    - name: "frontend"
      repository: "account/frontend-repo"
      branch: "main"
    - name: "backend"
      repository: "account/backend-api"
      branch: "main"
    - name: "database"
      repository: "account/database-service"
      branch: "main"
```

### Step 5: Deploy

Add `lifecycle-deploy!` label to the PR.

### Step 6: Set UUID

Update UUID to `dev-0` in the [mission control comment](/docs/tips/using-mission-control#override-uuid).

### Step 7: Enable Tracking

```sql
UPDATE builds
SET "trackDefaultBranches" = true, "isStatic" = true
WHERE uuid = 'dev-0';
```

## Key Behaviors

| Behavior                | Description                                                          |
| ----------------------- | -------------------------------------------------------------------- |
| **Fallback resolution** | Ephemeral environments use `dev-0` for services not explicitly built |
| **Auto-rebuild**        | Merges to `main` trigger automatic rebuild and redeploy              |
| **No TTL cleanup**      | `isStatic = true` prevents automatic deletion                        |

### Manual Rebuild Triggers

- Push commit to static environment branch
- Edit mission control comment
- Toggle service checkboxes

### Additional Static Environments

Create multiple static environments with unique UUIDs:

- `staging-0` - staging services
- `integration-0` - integration testing
- `demo-0` - demonstrations

## Troubleshooting

| Problem                        | Solution                                                         |
| ------------------------------ | ---------------------------------------------------------------- |
| Services not updating on merge | Verify `trackDefaultBranches = true` and GitHub App is installed |
| UUID conflict                  | Delete old `dev-0` record; check for soft-deleted records        |
| Branch mismatch                | Ensure config branch name matches repository default branch      |

## Checklist

- [ ] Deleted bootstrap `dev-0` record
- [ ] Created `lifecycle-static-env` repository
- [ ] Installed Lifecycle GitHub App
- [ ] Created PR with `lifecycle.yaml` from `dev-0` branch
- [ ] Added `lifecycle-deploy!` label
- [ ] Set UUID to `dev-0` in mission control
- [ ] Enabled `trackDefaultBranches` and `isStatic` flags
