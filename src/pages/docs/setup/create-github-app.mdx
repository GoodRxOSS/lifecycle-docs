---
title: Configure Application
tags:
  - github
  - app
  - install
  - setup
---

import { Callout } from "nextra/components";
import { Image } from "@lifecycle-docs/components";

To create a Github app that will send events to the Lifecycle with necessary permissions, follow these steps:

## Configure BuildKit Endpoint

Before creating the GitHub app, you need to configure the BuildKit endpoint in the database:

<Callout type="warning">
  Replace `my-lifecycle` in the commands below with your actual Helm release
  name before running them.
</Callout>

### Option 1: Using kubectl exec with psql

Execute the following command to connect to the PostgreSQL pod and run the query:

```bash
kubectl exec -it my-lifecycle-postgres-0 -- psql -U lifecycle -d lifecycle -c "
UPDATE global_config
SET config = jsonb_set(
    COALESCE(config::jsonb, '{}'::jsonb),
    '{buildkit,endpoint}',
    '\"tcp://my-lifecycle-buildkit.lifecycle-app.svc.cluster.local:1234\"'::jsonb,
    true
),
\"updatedAt\" = NOW()
WHERE key = 'buildDefaults';"
```

Note: `my-lifecycle-postgres-0` is the pod name where `my-lifecycle` is your Helm release name.

### Option 2: Direct SQL query

If you have direct database access, run the following SQL query:

```sql
UPDATE global_config
SET config = jsonb_set(
    COALESCE(config::jsonb, '{}'::jsonb),
    '{buildkit,endpoint}',
    '"tcp://my-lifecycle-buildkit.lifecycle-app.svc.cluster.local:1234"'::jsonb,
    true
),
"updatedAt" = NOW()
WHERE key = 'buildDefaults';
```

### Refresh Configuration Cache

After running either option above, refresh the configuration cache:

```bash
curl -X 'PUT' \
  'https://app.<your_domain>/api/v1/config/cache' \
  -H 'accept: application/json'
```

Replace `<your_domain>` with your actual domain (e.g., `0env.com`).

## Create GitHub App

<Callout type="info">
  Make sure you have admin access to the Github organization or account where
  you want to create the app.
</Callout>

- Navigate to your installed Lifecycle app at `https://app.<your_domain>/setup` (replace `<your_domain>` with your actual domain. e.g. `https://app.0env.com/setup`).
  <Image src="/setup/github-app-setup.png" width={1872} height={1068} />
- Select `Personal` or `Organization` based on your needs.
- Fill in the required fields:

  - **Github App Name**: A name for your app. (should be unique, use a prefix with your name or organization. Refer Github app naming convention [here](https://docs.github.com/en/apps/creating-github-apps/registering-a-github-app/)
  - **Organization Name**: Github organization name where the app will be created. Required if you selected `Organization`.

- Click `Create App`
- On the Github app creation page, confirm the app name and click `Create`
- Once the app is created, you will be redirected to the app installation page where you can choose one or more repositories to install the the newly minted app.

  <Callout type="info">
    Make sure to select the repositories you want the app to have access to. You
    can always change this later in the app settings but **adding atleast one
    repository is required to proceed with the setup**.
  </Callout>

  <br />

- Voila! ðŸŽ‰ Your Github app is now created and installed.

<Image src="/setup/github-app-installed.png" width={1902} height={1088} />

- Click `Configure and Restart` to apply the changes and start using the app.

<Callout type="info">
  The step above, sets up the global config values that Lifecycle app will use
  creating ephemeral environments and processing pull requests. And restarts the
  `deployment` for the github app secrets to take effect.
</Callout>

---

Let's move on the final step where we will configure the Lifecycle app config for processing pull requests and creating ephemeral environments.
