---
title: Mission Control Comment
description: Understanding and using the Lifecycle PR comment interface
tags:
  - mission-control
  - pr-comment
  - github
  - status
date: "2025-01-29"
---

import { Callout } from "nextra/components";
import { Mermaid } from "@lifecycle-docs/components";

# Mission Control

Mission Control is the PR comment interface for monitoring and managing ephemeral environments directly from GitHub.

## Quick Reference

| What You Want          | How To Do It                           |
| ---------------------- | -------------------------------------- |
| Deploy environment     | Add `lifecycle-deploy!` label to PR    |
| Enable status comments | Add `lifecycle-status-comments!` label |
| Disable a service      | Uncheck its checkbox in the comment    |
| Change service branch  | Edit the branch name in parentheses    |
| Set env variable       | Add `ENV:KEY:value` line               |
| Custom URL             | Add `url: my-subdomain` line           |
| Redeploy everything    | Check `[ ] Redeploy Environment`       |

---

## Comment Types

<Mermaid
  chart={`
flowchart TB
    subgraph MC["Mission Control Comment (default)"]
        MC1["Environment status, service URLs, configuration"]
        MC2["Action checkboxes for redeploy, cache purge"]
    end
    subgraph SC["Status Comment (opt-in via label)"]
        SC1["Real-time build/deploy progress per service"]
        SC2["Enable with: lifecycle-status-comments! label"]
    end
`}
/>

---

## Environment Status

| Status                        | Meaning                          |
| ----------------------------- | -------------------------------- |
| **is pending**                | Waiting to process or torn down  |
| **is building**               | Docker images being created      |
| **is deploying**              | Services deploying to Kubernetes |
| **is ready to deploy**        | Built, waiting for deploy label  |
| **is deployed**               | All services live and accessible |
| **deployed with an Error**    | Some services failed             |
| **has a configuration error** | Invalid `lifecycle.yaml`         |

## Service Status

| Status            | Meaning                     |
| ----------------- | --------------------------- |
| **Queued**        | Waiting to be processed     |
| **Cloning**       | Source code being fetched   |
| **Building**      | Docker image building       |
| **Built**         | Image ready                 |
| **Waiting**       | Waiting for dependencies    |
| **Deploying**     | Rolling out to cluster      |
| **Ready**         | Live and healthy            |
| **Build Failed**  | Docker build error          |
| **Deploy Failed** | Kubernetes deployment error |

---

## Configuring Services

### Enable/Disable Services

```
[x] api-service (main)      ← Enabled
[x] database                ← Enabled
[ ] redis-cache             ← Disabled (won't deploy)
```

### Change Branch

```diff
- [x] api-service (main)
+ [x] api-service (feature-branch)
```

### Set Environment Variables

```
ENV:API_KEY:my-secret-value
ENV:DEBUG:true
ENV:LOG_LEVEL:verbose
```

### Custom URL

```
url: my-feature
```

Result: `my-feature.lifecycle.example.com`

---

## Actions

| Action                                       | Effect                             |
| -------------------------------------------- | ---------------------------------- |
| `[ ] Redeploy Environment`                   | Tear down and rebuild all services |
| `[ ] Purge Fastly Service Cache`             | Clear CDN cache (if using Fastly)  |
| `[ ] Redeploy on pushes to default branches` | Auto-sync with main/master updates |

<Callout type="warning">
  Redeploy tears down the entire environment first. Save any ephemeral data
  before triggering.
</Callout>

---

## Common Mistakes

### WRONG: Editing without submitting

```
[ ] Redeploy Environment   ← Checked but not submitted
```

**CORRECT:** After checking a box, click "Update comment" to trigger the action.

### WRONG: Setting env vars with spaces

```
ENV:MY_VAR: some value     ← Space after colon breaks parsing
```

**CORRECT:**

```
ENV:MY_VAR:some value      ← No space after second colon
```

### WRONG: Expecting disabled service URLs

```
[ ] redis-cache            ← Disabled service has no URL
```

**CORRECT:** Only enabled services with `public: true` get accessible URLs.

---

## Example Comment

```
## Lifecycle Environment

**Status:** is deployed

### Services

| Service  | Status | URL                                      |
|----------|--------|------------------------------------------|
| api      | Ready  | https://api-abc123.lifecycle.example.com |
| web      | Ready  | https://web-abc123.lifecycle.example.com |
| database | Ready  | (internal only)                          |

### Configuration

[x] api (main)
[x] web (main)
[x] database

ENV:DEBUG:false

url: abc123

### Actions

[ ] Redeploy Environment
[ ] Purge Fastly Service Cache
```

---

## Troubleshooting

| Problem                     | Solution                                                                  |
| --------------------------- | ------------------------------------------------------------------------- |
| Comment not appearing       | Verify `lifecycle-deploy!` label is on PR                                 |
| Comment not updating        | Refresh page (GitHub caches); check webhook config                        |
| Action checkbox not working | Submit the comment after checking; verify environment state allows action |
| Service URL not accessible  | Confirm status is "Ready" and service has `public: true`                  |
| Status comment missing      | Add `lifecycle-status-comments!` label to PR                              |

---

## Summary

| Task                  | Action                                            |
| --------------------- | ------------------------------------------------- |
| Monitor environment   | Check Mission Control comment header              |
| Debug failed service  | Look for "Build Failed" or "Deploy Failed" status |
| Test different branch | Edit branch name in service checkbox line         |
| Share environment     | Copy URL from Services table or set custom `url:` |
| Fresh start           | Check "Redeploy Environment" and submit           |
| Stay synced with main | Check "Redeploy on pushes to default branches"    |
